import{_ as de}from"./DlfIw6Ms.js";import{_ as G,j as T,o as s,aa as E,O as te,d as W,c as k,z as _,t as B,k as r,F as L,B as U,y as l,Q as le,A as ue,x as b,l as d,m as e,h as H,r as S,a3 as pe,L as ae,D as z,q as O,J as j,aZ as ne,ab as ie,g as _e}from"./Pd6RrLp1.js";import{b as me,c as ve,a as Q,T as fe,d as $e,e as he,f as ye,g as ge}from"./CjEn23L9.js";import{_ as Ie}from"./qKLLgZOX.js";import{_ as se}from"./DYDoPj_5.js";import{_ as Te}from"./2WVDaFKk.js";import{u as ke}from"./0zS85Q81.js";import"./1OVHT2GX.js";import"./T4kW5CUp.js";import"./CcjC4gLZ.js";import"./D_TJXMTY.js";import"./pvpDbLJt.js";import"./DK9X1TaX.js";import"./Bh9jfPsV.js";import"./CuRHY0aD.js";import"./BSts32E-.js";import"./QJ3VVsaT.js";import"./Cuh519_O.js";import"./BZsyuj-b.js";import"./CasWryfL.js";import"./C3QHuKV1.js";import"./BoW1LxkV.js";import"./CpOl9fd2.js";const we={name:"UiStep",props:{active:{type:Boolean,default:!1}}};function Se(c,u,o,m,h,y){return s(),T("div",{class:te(["ui-step",{active:o.active}])},[E(c.$slots,"default",{},void 0,!0)],2)}const Y=G(we,[["render",Se],["__scopeId","data-v-cf10242c"]]),be=W({name:"TradeInStep"}),Ce={class:"trade-in-step"};function De(c,u,o,m,h,y){return s(),T("div",Ce,[E(c.$slots,"default",{},void 0,!0)])}const q=G(be,[["render",De],["__scopeId","data-v-5ea53775"]]),Ue=W({name:"TradeInStepTitle"}),Pe={class:"title"};function xe(c,u,o,m,h,y){return s(),T("span",Pe,[E(c.$slots,"default",{},void 0,!0)])}const J=G(Ue,[["render",xe],["__scopeId","data-v-9375c6ec"]]),Ve=W({name:"TradeInStepDescription"}),Ne={class:"text-body-3 description"};function Be(c,u,o,m,h,y){return s(),T("span",Ne,[E(c.$slots,"default",{},void 0,!0)])}const R=G(Ve,[["render",Be],["__scopeId","data-v-32a56694"]]),Ge={class:"label"},Me={__name:"TradeInAddBtn",props:{variant:{type:String,default:"tertiary"},hiddenIcon:{type:Boolean,default:!1},text:{type:String,default:""}},emits:["click"],setup(c){return(u,o)=>{const m=Ie,h=ue;return s(),k(h,le({...u.$attrs},{size:"s",class:"trade-in-add-btn",variant:c.variant,"min-width":200,onClick:o[0]||(o[0]=y=>u.$emit("click"))}),{default:_(()=>[c.hiddenIcon?B("",!0):(s(),k(m,{key:0,icon:"plus",width:"16px",height:"16px"})),r("span",Ge,[c.text?(s(),T(L,{key:1},[U(l(c.text),1)],64)):(s(),T(L,{key:0},[U(l(u.$t("trade_in_add_device")),1)],64))])]),_:1},16,["variant"])}}},Z=G(Me,[["__scopeId","data-v-e7ed0366"]]),Ke={class:"trade-in-user-device-view"},Ae={class:"trade-in-user-device-view_item-wrapper"},Fe={class:"trade-in-user-device-view_item-info"},Le={class:"trade-in-user-device-view_title"},ze={class:"trade-in-user-device-view_item-name"},Re={key:0,class:"trade-in-user-device-view_item-wrapper"},Ee={class:"trade-in-user-device-view_item-info"},We={class:"trade-in-user-device-view_title"},He={class:"trade-in-user-device-view_item-name"},Oe={key:0,class:"trade-in-user-device-view_title"},je={class:"trade-in-user-device-view_price-hint"},Qe={key:1,class:"trade-in-user-device-view_period"},Ye={__name:"TradeInUserDeviceView",props:{device:{type:Object,default:()=>({})}},setup(c){const u=c,o=b(()=>{var a;return((a=u.device)==null?void 0:a.exchangeProduct)??null}),m=b(()=>{var a,p,C,w,I;return((I=(w=(C=(p=(a=u.device)==null?void 0:a.initialGrade)==null?void 0:p.data)==null?void 0:C.buyoutTopUp)==null?void 0:w.specialGrading[0])==null?void 0:I.options[0])??null}),h=b(()=>{var a;return((a=m.value)==null?void 0:a.validFrom)??""}),y=b(()=>{var a;return((a=m.value)==null?void 0:a.validTill)??""}),g=b(()=>{var w;if(!((w=u.device)!=null&&w.device))return"";const{subcategory:a,storage:p,color:C}=u.device.device;return`${a}, ${p}, ${C}`});return(a,p)=>{const C=me,w=se,I=ve;return s(),T("div",Ke,[r("div",Ae,[r("div",Fe,[r("div",Le,l(a.$t("trade_in_exchange_device")),1),r("span",ze,l(e(g)),1)]),d(C,{options:[{label:a.$t("edit"),onClick:()=>a.$emit("change")},{label:a.$t("delete"),onClick:()=>a.$emit("remove")}]},null,8,["options"])]),e(o)?(s(),T("div",Re,[r("div",Ee,[r("div",We,l(a.$t("trade_in_wanted_device")),1),r("span",He,l(e(o).name),1)])])):B("",!0),r("div",{class:te(["trade-in-user-device-view_top-up-container",{"trade-in-user-device-view_top-up-container__active":c.device.isTopUpStatus}])},[c.device.isTopUpStatus&&e(o)?(s(),T("div",Oe,l(a.$t("trade_in_top_up_exchange_device",{device:e(o).name})),1)):B("",!0),d(w,{price:c.device.totalPriceWithTopUp,currency:c.device.grade.currency},null,8,["price","currency"]),r("div",je," * "+l(a.$t("preliminary_benefit")),1),p[0]||(p[0]=r("div",{class:"trade-in-user-device-view_separator"},null,-1)),e(h)&&e(y)&&c.device.isTopUpStatus?(s(),T("div",Qe,[d(I,{from:e(h),till:e(y)},null,8,["from","till"])])):B("",!0)],2)])}}},qe=G(Ye,[["__scopeId","data-v-cd5bd184"]]),Je={class:"trade-in-user-device-step_title-wrapper"},Ze={class:"user-devices"},Xe={__name:"TradeInUserDeviceStep",props:{stepNumber:{type:Number,default:1}},setup(c){const{pushGtmEvent:u}=O(),{userDevices:o,removeUserDeviceByIndex:m,resetStore:h,catalogDevices:y}=H(),g=S(!1),a=S({}),p=S(0),C=S({header:"trade-in-header-select",footer:"trade-in-footer-select"}),w=(v={})=>{u("tradeInSelectOld"),a.value=v,g.value=!0},I=b(()=>{const v=new Set(o.value.map(i=>{var f;return(f=i.exchangeProduct)==null?void 0:f.sku}));return y.value.filter(i=>{var f;return!v.has((f=i==null?void 0:i.product)==null?void 0:f.sku)}).map(i=>i.product)}),V=v=>{var f;if(typeof v!="number")return"";const i=o.value[v];return i?`${v}_${i!=null&&i.exchange_device_sku?i.exchange_device_sku:""}_${(f=i==null?void 0:i.exchangeProduct)!=null&&f.sku?i.exchangeProduct.sku:""}`:""};return pe(()=>{h()}),j("modalKeys",C),(v,i)=>{const f=Y,P=Q;return s(),k(q,{class:"trade-in-user-device-step"},{default:_(()=>[r("div",Je,[d(f,{active:!!e(o).length},{default:_(()=>[U(l(c.stepNumber),1)]),_:1},8,["active"]),d(J,null,{default:_(()=>[U(l(v.$t("trade_in_old_device_title")),1)]),_:1})]),e(o).length===0?(s(),k(R,{key:0},{default:_(()=>[U(l(v.$t("trade_in_old_device_description")),1)]),_:1})):B("",!0),r("div",Ze,[(s(!0),T(L,null,ae(e(o),($,N)=>(s(),k(qe,{key:`${V(N)}-${e(p)}`,device:$,onChange:M=>w($),onRemove:M=>e(m)(N)},null,8,["device","onChange","onRemove"]))),128))]),d(Z,{secondary:"",onClick:w}),d(P,{modelValue:e(g),"onUpdate:modelValue":i[1]||(i[1]=$=>z(g)?g.value=$:null),"max-width":604,"modal-class":"trade-in-user-device-step_grade"},{default:_(()=>[e(g)?(s(),k(e(fe),{key:e(g),"exchange-items":e(I),"initial-user-device":e(a),onClose:i[0]||(i[0]=$=>g.value=!1)},null,8,["exchange-items","initial-user-device"])):B("",!0)]),_:1},8,["modelValue"])]),_:1})}}},et={class:"trade-in-catalog-device-step_title-wrapper"},tt={class:"trade-in-catalog-device-step_devices"},at={__name:"TradeInCatalogDeviceStep",props:{stepNumber:{type:Number,default:2}},setup(c){const{pushGtmEvent:u}=O(),o=S(!1),m=S({}),h=S({}),y=S(""),g=S(null),a=S({header:"trade-in-catalog-modal-header",footer:"trade-in-catalog-modal-footer"}),{catalogDevices:p,removeCatalogDeviceByIndex:C,removeCatalogDeviceFromLC:w}=H(),I=({id:v,form:i,product:f},P)=>{y.value=v,m.value=i,h.value=f,g.value=P,o.value=!0},V=()=>{u("tradeInSelectNew"),y.value="",m.value={},h.value={},g.value=null,o.value=!0};return j("modalKeys",a),(v,i)=>{const f=Y,P=Q;return s(),k(e(q),{class:"trade-in-catalog-device-step"},{default:_(()=>[r("div",et,[d(f,{active:!!e(p).length},{default:_(()=>[U(l(c.stepNumber),1)]),_:1},8,["active"]),d(J,null,{default:_(()=>[U(l(v.$t("trade_in_new_device_title")),1)]),_:1})]),e(p).length===0?(s(),k(R,{key:0},{default:_(()=>[U(l(v.$t("trade_in_new_device_description")),1)]),_:1})):B("",!0),r("div",tt,[(s(!0),T(L,null,ae(e(p),($,N)=>(s(),k($e,{key:N,product:$.product,onChange:M=>I($,N),onRemove:M=>{e(C)(N),e(w)($)}},null,8,["product","onChange","onRemove"]))),128))]),d(Z,{secondary:"",onClick:V}),d(P,{modelValue:e(o),"onUpdate:modelValue":i[1]||(i[1]=$=>z(o)?o.value=$:null),"max-width":604,"modal-class":"trade-in-catalog-device-step_dialog","close-size":"s",fullscreen:{breakpoint:e(ie).md,default:null,type:e(ne).fullscreen}},{default:_(()=>[(s(),k(he,{key:e(o),"initial-id":e(y),"initial-form":e(m),"initial-index":e(g),"initial-product":e(h),"vertical-padding":"",onClose:i[0]||(i[0]=$=>o.value=!1)},null,8,["initial-id","initial-form","initial-index","initial-product"]))]),_:1},8,["modelValue","fullscreen"])]),_:1})}}},nt=G(at,[["__scopeId","data-v-1af8a5dd"]]),it={class:"trade-in-payment-step_title-wrapper"},st=["innerHTML"],ot={class:"trade-in-payment-step_hint"},rt={key:2},ct={key:0,class:"trade-in-payment-step_price"},dt={class:"trade-in-payment-step_price-label"},lt={class:"trade-in-payment-step_price trade-in-payment-step_price__small-margin"},ut={class:"label"},pt={key:1,class:"trade-in-payment-step_price"},_t={class:"label"},mt={class:"trade-in-payment-step_price"},vt={class:"trade-in-payment-step_price-label"},ft={class:"price"},$t={__name:"TradeInPaymentStep",props:{stepNumber:{type:Number,default:3}},setup(c){const{pushGtmEvent:u}=O(),m=_e().$i18n,{getSanitizeHtml:h}=ke(),y=S(1),g=S({header:"trade-in-payment-modal-header",footer:"trade-in-payment-modal-footer"}),{userDevices:a,catalogDevices:p,resetStore:C,resetLC:w}=H(),I=S(!1),V=S(!1),v=b(()=>h(m.t("trade_in_payment_message"))),i=b(()=>p.value.length>0&&p.value.find(t=>{var n,D;return!((n=t.product)!=null&&n.final_price)&&!((D=t.product)!=null&&D.price)})),f=b(()=>a.value.length>0&&p.value.length>0),P=b(()=>{var t,n,D,x,A,F;return((n=(t=p.value[0])==null?void 0:t.product)==null?void 0:n.currency)??((F=(A=(x=(D=a.value)==null?void 0:D[0])==null?void 0:x.initialGrade)==null?void 0:A.data)==null?void 0:F.currency)??""}),$=b(()=>{let t=0;return p.value.forEach(({product:n})=>{n&&(t+=n.final_price)}),t}),N=b(()=>a.value.reduce((t,n)=>{const D=n!=null&&n.totalPriceWithTopUp?Number(n.totalPriceWithTopUp):0;return t+D},0)*-1),M=t=>a.value.reduce((n,D)=>{const x=t(D);return n+(x?Number(x):0)},0),X=()=>M(t=>{var n;return(t==null?void 0:t.totalPriceWithTopUp)-((n=t==null?void 0:t.grade)==null?void 0:n.price)}),oe=()=>M(t=>{var n;return(n=t==null?void 0:t.grade)==null?void 0:n.price}),ee=b(()=>{const t=($.value??0)-(N.value||0);return t>0?t:1}),re=()=>{I.value=!0,V.value=!1,y.value++,C(),w()};function ce(){u("tradeInCheckout"),V.value=!0}return j("modalKeys",g),(t,n)=>{const D=Y,x=se,A=Te,F=Q;return s(),k(e(q),{class:"trade-in-payment-step"},{default:_(()=>[r("div",it,[d(D,{active:e(f)},{default:_(()=>[U(l(c.stepNumber),1)]),_:1},8,["active"]),d(J,null,{default:_(()=>[U(l(t.$t("trade_in_payment_title")),1)]),_:1})]),e(i)?(s(),k(R,{key:0,class:"trade-in-payment-step_step-description"},{default:_(()=>[r("span",{innerHTML:e(v)},null,8,st),r("span",ot,l(t.$t("trade_in_payment_hint")),1)]),_:1})):e(f)===!1?(s(),k(R,{key:1,class:"trade-in-payment-step_step-description"},{default:_(()=>[U(l(t.$t("trade_in_payment_description")),1)]),_:1})):(s(),T("div",rt,[e($)?(s(),T("div",ct,[r("div",dt,l(t.$t("trade_in_catalog_devices_price_label")),1),d(x,{price:e($),currency:e(P)},null,8,["price","currency"])])):B("",!0),r("div",lt,[r("div",ut,l(t.$t("trade_in_profit_price_label")),1),d(x,{price:`-${oe()}`,currency:e(P)},null,8,["price","currency"])]),X()?(s(),T("div",pt,[r("div",_t,l(t.$t("trade_in_top_up_price_label")),1),d(x,{price:`-${X()}`,currency:e(P)},null,8,["price","currency"])])):B("",!0),n[4]||(n[4]=r("div",{class:"trade-in-payment-step_separator"},null,-1)),r("div",mt,[r("div",vt,l(t.$t("trade_in_total_price_label")),1),r("div",ft,[d(x,{price:e(ee),currency:e(P)},null,8,["price","currency"])])])])),d(Z,{variant:"primary","hidden-icon":"",text:t.$t("trade_in_order_text"),onClick:ce},null,8,["text"]),d(A,{modelValue:e(I),"onUpdate:modelValue":n[1]||(n[1]=K=>z(I)?I.value=K:null),"max-width":604,"full-height":"",onClose:n[2]||(n[2]=K=>I.value=!1)},{default:_(()=>[d(e(ye),{onClose:n[0]||(n[0]=K=>I.value=!1)})]),_:1},8,["modelValue"]),d(F,{modelValue:e(V),"onUpdate:modelValue":n[3]||(n[3]=K=>z(V)?V.value=K:null),"max-width":604,"modal-class":"trade-in-payment-step_form",fullscreen:{breakpoint:e(ie).md,default:null,type:e(ne).fullscreen}},{default:_(()=>[(s(),k(ge,{key:e(y),"profit-price":e(ee),"catalog-devices-price":e($),discount:e(N),"onSubmit:success":re},null,8,["profit-price","catalog-devices-price","discount"]))]),_:1},8,["modelValue","fullscreen"])]),_:1})}}},ht=G($t,[["__scopeId","data-v-c82ce1f5"]]),yt={class:"trade-in-calculator_content"},Et={__name:"TradeInCalculator",setup(c){return(u,o)=>{const m=de;return s(),k(m,{class:"pt-0 trade-in-calculator"},{default:_(()=>[r("div",yt,[d(e(Xe)),d(e(nt)),d(ht)])]),_:1})}}};export{Et as default};
