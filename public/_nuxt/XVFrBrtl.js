import{_ as z}from"./CuRHY0aD.js";import{_ as G}from"./C3QHuKV1.js";import{_ as H,a as J}from"./D_TJXMTY.js";import{u as K,a as Q,_ as W}from"./BoW1LxkV.js";import{_ as X}from"./C3vUPGSh.js";import{b as Y,r as v,S as Z,x as u,c as ee,o as k,z as r,k as oe,j as te,t as ae,l as a,y as g,m as e,A as le,B as ne,D as se,O as re,q as me}from"./Pd6RrLp1.js";import{_ as ue}from"./BmPbXs4R.js";import{_ as de}from"./DK9X1TaX.js";import{L as ie}from"./DxWnzEjH.js";import{u as ce}from"./CiYsyl20.js";import"./pvpDbLJt.js";import"./qKLLgZOX.js";import"./2WVDaFKk.js";const pe={class:"feedback-form_title"},_e={key:0,class:"feedback-form_spinner"},we={__name:"feedback-form",props:{nda:{type:Boolean,default:!1},data:{type:Object,default(){return{}}}},setup($){const x={email:null,phone:null,name:null,personalAgreement:!1,subscription:!1,comment:null},p=$,{t:F}=Y(),{pushGtmEvent:U}=me(),{isLoading:s,startLoading:y,stopLoading:A}=ce(),{getErrors:_,defaultRequiredMessage:f,emailPattern:h}=K(),d=v(!1),b=v(!1),o=Z({...x}),w=u(()=>({email:{emailPattern:h,defaultRequiredMessage:f},name:{defaultRequiredMessage:f},phone:{defaultRequiredMessage:f},comment:{defaultRequiredMessage:f}})),B=u(()=>p.data&&p.data.title?p.data.title:F("feedback_form_title")),m=Q(w,o),E=u(()=>{const n=!o.personalAgreement||s.value;return p.nda?n||!o.nda:n}),L=u(()=>_(m.value.name)),R=u(()=>_(m.value.phone)),D=u(()=>_(m.value.email)),S=u(()=>_(m.value.comment)),C=()=>{var n,t;return(n=m.value)==null||n.$touch(),!((t=m.value)!=null&&t.$invalid)},N=()=>{o.name=null,o.phone=null,o.email=null,o.comment=null,o.personalAgreement=!1,o.subscription=!1},P=async()=>{var n,t;if(o.personalAgreement===!0&&C()){y();const c=await ie.sendFeedbackData({...o,website:window.location.href});((n=c==null?void 0:c.status)==null?void 0:n.value)==="success"?(N(),(t=m.value)==null||t.$reset(),d.value=!0,b.value=!0,U("submitForm")):(d.value=!0,b.value=!1),A()}return!1};return(n,t)=>{const c=z,V=G,i=H,T=W,I=X,O=J,M=le,j=ue,q=de;return k(),ee(q,{class:re(["feedback-form",{loading:e(s)}]),name:"landing-form",method:"POST"},{default:r(()=>[oe("h2",pe,g(e(B)),1),e(s)?(k(),te("div",_e,[a(c)])):ae("",!0),a(i,null,{default:r(()=>[a(V,{id:"user-name",modelValue:e(o).name,"onUpdate:modelValue":t[0]||(t[0]=l=>e(o).name=l),errors:e(L),disabled:e(s),label:`${n.$t("name")}`,"data-field":"name"},null,8,["modelValue","errors","disabled","label"])]),_:1}),a(i,null,{default:r(()=>[a(T,{id:"user-phone",modelValue:e(o).phone,"onUpdate:modelValue":t[1]||(t[1]=l=>e(o).phone=l),disabled:e(s),errors:e(R),label:"write_phone_number"},null,8,["modelValue","disabled","errors"])]),_:1}),a(i,null,{default:r(()=>[a(V,{modelValue:e(o).email,"onUpdate:modelValue":t[2]||(t[2]=l=>e(o).email=l),disabled:e(s),errors:e(D),label:"email",type:"email"},null,8,["modelValue","disabled","errors"])]),_:1}),a(i,null,{default:r(()=>[a(I,{id:"user-comment",modelValue:e(o).comment,"onUpdate:modelValue":t[3]||(t[3]=l=>e(o).comment=l),errors:e(S),disabled:e(s),label:`${n.$t("feedback_comment")}`},null,8,["modelValue","errors","disabled","label"])]),_:1}),a(i,null,{default:r(()=>[a(O,{modelValue:e(o).personalAgreement,"onUpdate:modelValue":t[4]||(t[4]=l=>e(o).personalAgreement=l),disabled:e(s)},null,8,["modelValue","disabled"])]),_:1}),a(i,null,{default:r(()=>[a(M,{class:"feedback-form_button",disabled:e(E),loading:e(s),onClick:P},{default:r(()=>[ne(g(n.$t("send")),1)]),_:1},8,["disabled","loading"])]),_:1}),a(j,{modelValue:e(d),"onUpdate:modelValue":t[5]||(t[5]=l=>se(d)?d.value=l:null),success:e(b),"success-title":"feedback_send_success_title","failure-title":"feedback_send_error_title",onInput:t[6]||(t[6]=l=>d.value=l)},null,8,["modelValue","success"])]),_:1},8,["class"])}}};export{we as default};
