import{g as M,C as V,_ as L}from"./CanreSBL.js";import{_ as N}from"./CNf1FbPc.js";import{_ as W}from"./qGe41cgA.js";import{_ as q}from"./DnrtWxdD.js";import{a as K}from"./C3MdYnyV.js";import{_ as U,b as z,x as w,r as P,p as A,K as G,j as b,o as n,c as p,t as u,k as H,m as d,F as j,L as J}from"./Pd6RrLp1.js";const Q={class:"category-page"},R={key:1},T={__name:"category-page",props:{data:{type:Object,required:!0},seoContent:{type:Object,default:()=>{}},constructorBlocks:{type:Object,default:null},constructorPayload:{type:Object,default:()=>{}}},async setup(a){var B;let f,k;const o=a,{locale:F}=z(),{pushMindBoxEvent:I}=K(),x=w(()=>{var l,s,c,r,i,y,g,m,S;const t=(r=(c=(s=(l=o.data)==null?void 0:l.category)==null?void 0:s.contents)==null?void 0:c.find(_=>_.type==="category_badge"))==null?void 0:r.data;return t?(S=(m=(g=o.data)==null?void 0:g.category)==null?void 0:m.children)==null?void 0:S.map(_=>(t.forEach(v=>{v.id===_.id&&(_.customBadges=v.content)}),_)):(y=(i=o.data)==null?void 0:i.category)==null?void 0:y.children}),h=P([]),C=P(null),O=async t=>{const e=await M(t,F);e&&(h.value=e)},$=async t=>{var c,r;const e=(r=(c=t==null?void 0:t.contents)==null?void 0:c.find(i=>i.type==="accesories_url"))==null?void 0:r.data,l=e==null?void 0:e.accessoryCategorySlug,s=await V.getAccessories(l);s&&(C.value=s)};o.data.category&&(I("webCatalogCategoryView",(B=o.data.category)==null?void 0:B.id),[f,k]=A(()=>O(o.data.category)),await f,k(),[f,k]=A(()=>$(o.data.category)),await f,k());const{setIsAppleCategoryPage:D}=G(),E=w(()=>{var t,e;return(e=(t=o.data)==null?void 0:t.category)==null?void 0:e.isOnlyMainProductsShown});return D(E.value),(t,e)=>{var i,y,g;const l=L,s=N,c=W,r=q;return n(),b(j,null,[(i=d(h))!=null&&i.length?(n(),p(l,{key:0,items:d(h),"category-name":(y=a.data.category)==null?void 0:y.name,"category-slug":(g=a.data.category)==null?void 0:g.slug},null,8,["items","category-name","category-slug"])):u("",!0),H("div",Q,[a.constructorBlocks.blocks.length&&a.constructorPayload?(n(),p(s,{key:0,"page-data":a.constructorBlocks,payload:a.constructorPayload},null,8,["page-data","payload"])):u("",!0),a.data.category?(n(),b("div",R,[d(x)?(n(!0),b(j,{key:0},J(d(x),m=>(n(),p(c,{key:m.id,category:m},null,8,["category"]))),128)):u("",!0),d(C)?(n(),p(c,{key:1,category:d(C),"button-text":t.$t("view_collection")},null,8,["category","button-text"])):u("",!0),a.seoContent?(n(),p(r,{key:2,data:a.seoContent},null,8,["data"])):u("",!0)])):u("",!0)])],64)}}},ot=U(T,[["__scopeId","data-v-04a5c3cf"]]);export{ot as _};
