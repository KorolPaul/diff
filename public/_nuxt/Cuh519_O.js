import{T as Ye,aR as Xe,aS as He,aT as Je,aU as Ke}from"./Pd6RrLp1.js";const s=e=>e===!0||e==="t"||e===1?"t":"f",_=e=>`${e}${e.includes(".")?"":" option"}`;function n(e,t,r){if(e===void 0)throw new Error(`${_(t)} is undefined${r?`. ${r}`:""}`)}function w(e,t,r,o){return`${_(e)} value can't be less${o?" or equal":""} then ${t}${r?`. ${r}`:""}`}function a(e,t,r){if(typeof e!="number")throw new Error(`${_(t)} is not a number${r!=null&&r.addInfo?`. ${r==null?void 0:r.addInfo}`:""}`);if(!(r!=null&&r.addParam))return;const o=r.addParam,i=r==null?void 0:r.addInfo;if(o.min!==void 0){if(o.minEqual&&e<=o.min)throw new Error(w(t,o.min,i,!0));if(e<o.min)throw new Error(w(t,o.min,i));if(o.max!==void 0&&e>o.max)throw new Error(`${_(t)} value can't be more than ${o.max}${i?`. ${i}`:""}`)}if(o.isInt&&!Number.isInteger(e))throw new Error(`${_(t)} is must be an integer`)}function c(e,t,r){const o=`Valid values are: ${Object.keys(e).join(", ")}`;if(!e[t])throw new Error(`${_(r)} is invalid. ${o}`)}function Qe(e,t,r){if(!e.includes(t)){const o=`Valid values are: ${e.join(", ")}`;throw new Error(`${_(r)} is invalid. ${o}`)}}function m(e,t,r){if(typeof e!="string")throw new Error(`${_(t)} is not a string`);if(r){if(e.match(/[^0-9a-fA-F]/))throw new Error(`${_(t)} must be hexadecimal`);if(e.length!==3&&e.length!==6&&e.length!==8)throw new Error(`${_(t)} must be 3, 6 or 8 characters long (with alpha)`)}}function b(e,t){if(!Array.isArray(e))throw new Error(`${_(t)} is not an array`);if(e.length===0)throw new Error(`${_(t)} is empty`)}function p(e,t){if(typeof e!="boolean")throw new Error(`${_(t)} is not a boolean`)}const x=e=>e.adjust||e.a,Ge=e=>!!x(e),Ze=e=>{const t=x(e);n(t,"adjust"),t.brightness!==void 0&&a(t.brightness,"adjust.brightness",{addParam:{min:-255,max:255}});const r=t.brightness??"",o=t.contrast??"",i=t.saturation??"";return`a:${r}:${o}:${i}`},et=Object.freeze(Object.defineProperty({__proto__:null,build:Ze,test:Ge},Symbol.toStringTag,{value:"Module"})),tt={none:!0,size:!0,dssim:!0,ml:!0},T=e=>e.autoquality||e.aq,rt=e=>!!T(e),ot=e=>{const t=T(e);n(t,"autoquality");const{method:r,target:o,min_quality:i,max_quality:l,allowed_error:u}=t;if(r&&c(tt,r,"autoquality.method"),o!==void 0&&a(o,"autoquality.target",{addParam:{min:0}}),i!==void 0&&a(i,"autoquality.min_quality",{addParam:{min:0,max:100}}),l!==void 0&&a(l,"autoquality.max_quality",{addParam:{min:0,max:100}}),u!==void 0){if(r!=="dssim"&&r!=="ml")throw new Error("autoquality.allowed_error is applicable only to dssim and ml methods");a(u,"autoquality.allowed_error",{addParam:{min:0,max:1}})}return`aq:${r??""}:${o??""}:${i??""}:${l??""}:${u??""}`.replace(/:+$/,"")},nt=Object.freeze(Object.defineProperty({__proto__:null,build:ot,test:rt},Symbol.toStringTag,{value:"Module"})),M=e=>{if("auto_rotate"in e)return e.auto_rotate;if("ar"in e)return e.ar},it=e=>M(e)!==void 0,at=e=>{const t=M(e);return n(t,"auto_rotate"),`ar:${s(t)}`},lt=Object.freeze(Object.defineProperty({__proto__:null,build:at,test:it},Symbol.toStringTag,{value:"Module"})),k=e=>e.background||e.bg,ut=e=>!!k(e),st=e=>{const t=k(e);if(n(t,"background"),typeof t=="number")throw new Error("background option is not a string or object");return typeof t=="string"?(m(t,"background",!0),`bg:${t}`):(n(t.r,"background.r"),n(t.g,"background.g"),n(t.b,"background.b"),a(t.r,"background.r"),a(t.g,"background.g"),a(t.b,"background.b"),`bg:${t.r}:${t.g}:${t.b}`)},dt=Object.freeze(Object.defineProperty({__proto__:null,build:st,test:ut},Symbol.toStringTag,{value:"Module"})),q=e=>e.background_alpha??e.bga,_t=e=>!!q(e),ct=e=>{const t=q(e);return n(t,"background_alpha"),a(t,"background_alpha",{addParam:{min:0,max:1}}),`background_alpha:${t}`},mt=Object.freeze(Object.defineProperty({__proto__:null,build:ct,test:_t},Symbol.toStringTag,{value:"Module"})),E=e=>e.blur??e.bl,pt=e=>!!E(e),bt=e=>{const t=E(e);return n(t,"blur"),a(t,"blur",{addParam:{min:0}}),`bl:${t}`},ft=Object.freeze(Object.defineProperty({__proto__:null,build:bt,test:pt},Symbol.toStringTag,{value:"Module"})),I=e=>e.blur_detections||e.bd,gt=e=>!!I(e),yt=e=>{const t=I(e);n(t,"blur_detections"),n(t.sigma,"blur_detections.sigma"),a(t.sigma,"blur_detections.sigma");const r=t.sigma,o=t.class_names?t.class_names.join(":"):"";return`bd:${r}:${o}`.replace(/:+$/,"")},$t=Object.freeze(Object.defineProperty({__proto__:null,build:yt,test:gt},Symbol.toStringTag,{value:"Module"})),A=e=>e.brightness??e.br,jt=e=>!!A(e),ht=e=>{const t=A(e);return n(t,"brightness"),a(t,"brightness",{addParam:{min:-255,max:255}}),`br:${t}`},vt=Object.freeze(Object.defineProperty({__proto__:null,build:ht,test:jt},Symbol.toStringTag,{value:"Module"})),U=e=>e.cachebuster||e.cb,Ot=e=>!!U(e),wt=e=>{const t=U(e);return n(t,"cachebuster"),m(t,"cachebuster"),`cb:${t}`},St=Object.freeze(Object.defineProperty({__proto__:null,build:wt,test:Ot},Symbol.toStringTag,{value:"Module"})),R=e=>e.contrast??e.co,Pt=e=>!!R(e),zt=e=>{const t=R(e);return n(t,"contrast"),a(t,"contrast",{addParam:{min:0}}),`co:${t}`},xt=Object.freeze(Object.defineProperty({__proto__:null,build:zt,test:Pt},Symbol.toStringTag,{value:"Module"})),N={no:!0,so:!0,ea:!0,we:!0,ce:!0,noea:!0,nowe:!0,soea:!0,sowe:!0},Tt={...N,sm:!0,fp:!0,obj:!0},F=e=>e.gravity||e.g,g=e=>!!F(e),f=(e,t)=>`${t?"":"g:"}${e.replace(/:+$/,"")}`,y=(e,t={})=>{const{headless:r=!1}=t,o=F(e);n(o,"gravity"),n(o.type,"gravity.type");const i=o.type;if(c(Tt,i,"gravity.type"),(o.x_offset||o.y_offset)&&c(N,i,"gravity.type"),o.class_names&&i!=="obj")throw new Error("gravity.class_names can be used only with type obj");if((o.x||o.y)&&i!=="fp")throw new Error("gravity.x and gravity.y can be used only with type fp");if(i==="sm")return f(i,r);if(i==="fp"){const l=o;return n(l.x,"gravity.x"),n(l.y,"gravity.y"),a(l.x,"gravity.x",{addParam:{min:0,max:1}}),a(l.y,"gravity.y",{addParam:{min:0,max:1}}),f(`${i}:${l.x}:${l.y}`,r)}if(i==="obj"){const l=o;n(o.class_names,"gravity.class_names"),b(l.class_names,"gravity.class_names");const u=l.class_names;return f(`${i}:${u.join(":")}`,r)}else{const l=o,u=l.x_offset===void 0?"":l.x_offset,d=l.y_offset===void 0?"":l.y_offset;return f(`${l.type}:${u}:${d}`,r)}},Mt=Object.freeze(Object.defineProperty({__proto__:null,build:y,test:g},Symbol.toStringTag,{value:"Module"})),C=e=>e.crop||e.c,kt=e=>!!C(e),qt=e=>{const t=C(e);n(t,"crop");const{width:r,height:o}=t;n(r,"crop.width"),n(o,"crop.height"),a(r,"crop.width",{addParam:{min:0}}),a(o,"crop.height",{addParam:{min:0}});const i=g(t)?y(t,{headless:!0}):"";return`c:${r}:${o}:${i}`.replace(/:+$/,"")},Et=Object.freeze(Object.defineProperty({__proto__:null,build:qt,test:kt},Symbol.toStringTag,{value:"Module"})),D=e=>{if("disable_animation"in e)return e.disable_animation;if("da"in e)return e.da},It=e=>D(e)!==void 0,At=e=>{const t=D(e);return n(t,"disable_animation"),`da:${s(t)}`},Ut=Object.freeze(Object.defineProperty({__proto__:null,build:At,test:It},Symbol.toStringTag,{value:"Module"})),L=e=>e.dpi,Rt=e=>!!L(e),Nt=e=>{const t=L(e);return n(t,"dpi"),a(t,"dpi"),`dpi:${t}`},Ft=Object.freeze(Object.defineProperty({__proto__:null,build:Nt,test:Rt},Symbol.toStringTag,{value:"Module"})),V=e=>e.dpr,Ct=e=>!!V(e),Dt=e=>{const t=V(e);return n(t,"dpr"),a(t,"dpr",{addParam:{min:0}}),`dpr:${t}`},Lt=Object.freeze(Object.defineProperty({__proto__:null,build:Dt,test:Ct},Symbol.toStringTag,{value:"Module"})),B=e=>e.draw_detections||e.dd,Vt=e=>!!B(e),Bt=e=>{const t=B(e);n(t,"draw_detections"),n(t.draw,"draw_detections.draw");const r=s(t.draw),o=t.class_names?`:${t.class_names.join(":")}`:"";return`dd:${r}${o}`},Wt=Object.freeze(Object.defineProperty({__proto__:null,build:Bt,test:Vt},Symbol.toStringTag,{value:"Module"})),W=e=>{if("enforce_thumbnail"in e)return e.enforce_thumbnail;if("eth"in e)return e.eth},Yt=e=>W(e)!==void 0,Xt=e=>{const t=W(e);return n(t,"enforce_thumbnail"),`eth:${s(t)}`},Ht=Object.freeze(Object.defineProperty({__proto__:null,build:Xt,test:Yt},Symbol.toStringTag,{value:"Module"})),Y=e=>{if("enlarge"in e)return e.enlarge;if("el"in e)return e.el},Jt=e=>Y(e)!==void 0,Kt=e=>{const t=Y(e);return n(t,"enlarge"),`el:${s(t)}`},Qt=Object.freeze(Object.defineProperty({__proto__:null,build:Kt,test:Jt},Symbol.toStringTag,{value:"Module"})),X=e=>e.expires||e.exp,Gt=e=>!!X(e),Zt=e=>{const t=X(e);return n(t,"expires"),a(t,"expires"),`exp:${t}`},er=Object.freeze(Object.defineProperty({__proto__:null,build:Zt,test:Gt},Symbol.toStringTag,{value:"Module"})),H=e=>e.extend||e.ex,h=e=>!!H(e),tr=(e,t)=>`${t?"":"ex:"}${e.replace(/:+$/,"")}`,v=(e,t={})=>{const{headless:r=!1}=t,o=H(e);n(o,"extend"),n(o.extend,"extend.extend");const i=g(o)?`:${y(o,{headless:!0})}`:"";return tr(`${s(o.extend)}${i}`,r)},rr=Object.freeze(Object.defineProperty({__proto__:null,build:v,test:h},Symbol.toStringTag,{value:"Module"})),J=e=>e.extend_aspect_ratio||e.exar||e.extend_ar,or=e=>!!J(e),nr=e=>{const t=J(e);n(t,"extend_aspect_ratio"),n(t.extend,"extend_aspect_ratio.extend");const r=g(t)?`:${y(t,{headless:!0})}`:"";return`exar:${s(t.extend)}${r}`},ir=Object.freeze(Object.defineProperty({__proto__:null,build:nr,test:or},Symbol.toStringTag,{value:"Module"})),K=e=>e.fallback_image_url||e.fiu,ar=e=>!!K(e),lr=e=>{const t=K(e);return n(t,"fallback_image_url"),m(t,"fallback_image_url"),`fiu:${t}`},ur=Object.freeze(Object.defineProperty({__proto__:null,build:lr,test:ar},Symbol.toStringTag,{value:"Module"})),Q=e=>e.filename||e.fn,sr=e=>!!Q(e),dr=e=>{const t=Q(e);n(t,"filename"),n(t.name,"filename.name"),m(t.name,"filename.name");const r=t.encoded===void 0?"":`:${s(t.encoded)}`;return`fn:${t.name}${r}`},_r=Object.freeze(Object.defineProperty({__proto__:null,build:dr,test:sr},Symbol.toStringTag,{value:"Module"})),cr={png:!0,jpg:!0,webp:!0,avif:!0,gif:!0,ico:!0,svg:!0,bmp:!0,tiff:!0,mp4:!0,best:!0},G=e=>e.format||e.f||e.ext,mr=e=>!!G(e),pr=e=>{const t=G(e);return n(t,"format"),c(cr,t,"format"),`f:${t}`},br=Object.freeze(Object.defineProperty({__proto__:null,build:pr,test:mr},Symbol.toStringTag,{value:"Module"})),Z=e=>e.format_quality||e.fq,fr=e=>!!Z(e),gr=e=>{const t=Z(e);n(t,"format_quality"),b(t,"format_quality");const r=[];return t.forEach(o=>{r.push(`${o.format}:${o.quality}`)}),`fq:${r.join(":")}`},yr=Object.freeze(Object.defineProperty({__proto__:null,build:gr,test:fr},Symbol.toStringTag,{value:"Module"})),$r={down:!0,up:!0,right:!0,left:!0},ee=e=>e.gradient||e.gr,jr=e=>!!ee(e),hr=e=>{const t=ee(e);n(t,"gradient");const{opacity:r,color:o,direction:i,start:l,stop:u}=t;return n(r,"gradient.opacity"),a(r,"gradient.opacity",{addParam:{min:0,max:1}}),o&&m(o,"gradient.color",!0),i&&(m(i,"gradient.direction"),c($r,i,"gradient.direction")),l&&a(l,"gradient.start",{addParam:{min:0,max:1}}),u&&a(u,"gradient.stop",{addParam:{min:0,max:1}}),`gr:${r}:${o||""}:${i||""}:${l||""}:${u||""}`.replace(/:+$/,"")},vr=Object.freeze(Object.defineProperty({__proto__:null,build:hr,test:jr},Symbol.toStringTag,{value:"Module"})),te=e=>e.height??e.h,Or=e=>!!te(e),wr=e=>{const t=te(e);return n(t,"height"),a(t,"height",{addParam:{min:0}}),`h:${t}`},Sr=Object.freeze(Object.defineProperty({__proto__:null,build:wr,test:Or},Symbol.toStringTag,{value:"Module"})),re=e=>e.jpeg_options||e.jpgo,Pr=e=>!!re(e),zr=e=>{const t=re(e);n(t,"jpeg_options");const{progressive:r,no_subsample:o,trellis_quant:i,overshoot_deringing:l,optimize_scans:u,quant_table:d}=t;if(r&&p(r,"jpeg_options.progressive"),o&&p(o,"jpeg_options.no_subsample"),i&&p(i,"jpeg_options.trellis_quant"),l&&p(l,"jpeg_options.overshoot_deringing"),u&&(p(u,"jpeg_options.optimize_scans"),r===!1))throw new Error("jpeg_options.progressive must be true if jpeg_options.optimize_scans is true");return d&&a(d,"jpeg_options.quant_table",{addParam:{min:0,max:8}}),`jpgo:${r===void 0?"":r}:${o===void 0?"":o}:${i===void 0?"":i}:${l===void 0?"":l}:${u===void 0?"":u}:${d===void 0?"":d}`.replace(/:+$/,"")},xr=Object.freeze(Object.defineProperty({__proto__:null,build:zr,test:Pr},Symbol.toStringTag,{value:"Module"})),oe=e=>{if("keep_copyright"in e)return e.keep_copyright;if("kcr"in e)return e.kcr},Tr=e=>oe(e)!==void 0,Mr=e=>{const t=oe(e);return n(t,"keep_copyright"),`kcr:${s(t)}`},kr=Object.freeze(Object.defineProperty({__proto__:null,build:Mr,test:Tr},Symbol.toStringTag,{value:"Module"})),ne=e=>{if("max_animation_frames"in e)return e.max_animation_frames;if("maf"in e)return e.maf},qr=e=>ne(e)!==void 0,Er=e=>{const t=ne(e);return n(t,"max_animation_frames"),a(t,"max_animation_frames",{addParam:{min:0,minEqual:!0}}),`maf:${t}`},Ir=Object.freeze(Object.defineProperty({__proto__:null,build:Er,test:qr},Symbol.toStringTag,{value:"Module"})),ie=e=>{if("max_animation_frame_resolution"in e)return e.max_animation_frame_resolution;if("mafr"in e)return e.mafr},Ar=e=>ie(e)!==void 0,Ur=e=>{const t=ie(e);return n(t,"max_animation_frame_resolution"),a(t,"max_animation_frame_resolution",{addParam:{min:0}}),`mafr:${t}`},Rr=Object.freeze(Object.defineProperty({__proto__:null,build:Ur,test:Ar},Symbol.toStringTag,{value:"Module"})),ae=e=>e.max_bytes??e.mb,Nr=e=>!!ae(e),Fr=e=>{const t=ae(e);return n(t,"max_bytes"),a(t,"max_bytes",{addParam:{min:0}}),`mb:${t}`},Cr=Object.freeze(Object.defineProperty({__proto__:null,build:Fr,test:Nr},Symbol.toStringTag,{value:"Module"})),le=["no","so","ea","we","noea","nowe","soea","sowe","ce"],Dr=e=>le.includes(e.type),ue=e=>e.objects_position||e.obj_pos||e.op,Lr=e=>!!ue(e),Vr=e=>{const t=ue(e);n(t,"objects_position");const r=t.type;if(Qe([...le,"fp","prop"],r,"type"),Dr(t)){t.xOffset!==void 0&&a(t.xOffset,"objects_position.xOffset"),t.yOffset!==void 0&&a(t.yOffset,"objects_position.yOffset");const o=t.xOffset??"",i=t.yOffset??"";return`op:${r}:${o}:${i}`}else if(t.type==="fp"){t.x!==void 0&&a(t.x,"objects_position.x",{addParam:{min:0,max:1}}),t.y!==void 0&&a(t.y,"objects_position.y",{addParam:{min:0,max:1}});const o=t.x??"",i=t.y??"";return`op:${r}:${o}:${i}`}else{if(r==="prop")return"op:prop";throw new Error(`Unknown object position type: ${r}`)}},Br=Object.freeze(Object.defineProperty({__proto__:null,build:Vr,test:Lr},Symbol.toStringTag,{value:"Module"})),se=e=>{if("max_src_file_size"in e)return e.max_src_file_size;if("msfs"in e)return e.msfs},Wr=e=>se(e)!==void 0,Yr=e=>{const t=se(e);return n(t,"max_src_file_size"),a(t,"max_src_file_size",{addParam:{min:0}}),`msfs:${t}`},Xr=Object.freeze(Object.defineProperty({__proto__:null,build:Yr,test:Wr},Symbol.toStringTag,{value:"Module"})),de=e=>{if("max_src_resolution"in e)return e.max_src_resolution;if("msr"in e)return e.msr},Hr=e=>de(e)!==void 0,Jr=e=>{const t=de(e);return n(t,"max_src_resolution"),a(t,"max_src_resolution",{addParam:{min:0,minEqual:!0}}),`msr:${t}`},Kr=Object.freeze(Object.defineProperty({__proto__:null,build:Jr,test:Hr},Symbol.toStringTag,{value:"Module"})),_e=e=>e.min_height??e.mh,Qr=e=>!!_e(e),Gr=e=>{const t=_e(e);return n(t,"min_height"),a(t,"min_height",{addParam:{min:0}}),`mh:${t}`},Zr=Object.freeze(Object.defineProperty({__proto__:null,build:Gr,test:Qr},Symbol.toStringTag,{value:"Module"})),ce=e=>e.min_width??e.mw,eo=e=>!!ce(e),to=e=>{const t=ce(e);return n(t,"min_width"),a(t,"min_width",{addParam:{min:0}}),`mw:${t}`},ro=Object.freeze(Object.defineProperty({__proto__:null,build:to,test:eo},Symbol.toStringTag,{value:"Module"})),me=e=>e.padding||e.pd,oo=e=>!!me(e),no=e=>{const t=me(e);if(n(t,"padding"),typeof t=="string")throw new Error("padding option is not a number or object");if(typeof t=="number")return a(t,"padding",{addParam:{min:0}}),`pd:${t}`;t.top!==void 0&&a(t.top,"padding.top"),t.right!==void 0&&a(t.right,"padding.right"),t.bottom!==void 0&&a(t.bottom,"padding.bottom"),t.left!==void 0&&a(t.left,"padding.left");const r=t.top??"",o=t.right??"",i=t.bottom??"",l=t.left??"";return`pd:${r}:${o}:${i}:${l}`.replace(/:+$/,"")},io=Object.freeze(Object.defineProperty({__proto__:null,build:no,test:oo},Symbol.toStringTag,{value:"Module"})),pe=e=>{if("page"in e)return e.page;if("pg"in e)return e.pg},ao=e=>pe(e)!==void 0,lo=e=>{const t=pe(e);return n(t,"page"),a(t,"page",{addParam:{min:0,isInt:!0}}),`pg:${t}`},uo=Object.freeze(Object.defineProperty({__proto__:null,build:lo,test:ao},Symbol.toStringTag,{value:"Module"})),be=e=>{if("pages"in e)return e.pages;if("pgs"in e)return e.pgs},so=e=>be(e)!==void 0,_o=e=>{const t=be(e);return n(t,"pages"),a(t,"pages",{addParam:{min:1,isInt:!0}}),`pgs:${t}`},co=Object.freeze(Object.defineProperty({__proto__:null,build:_o,test:so},Symbol.toStringTag,{value:"Module"})),fe=e=>e.pixelate??e.pix,mo=e=>!!fe(e),po=e=>{const t=fe(e);return n(t,"pixelate"),a(t,"pixelate",{addParam:{min:0}}),`pix:${t}`},bo=Object.freeze(Object.defineProperty({__proto__:null,build:po,test:mo},Symbol.toStringTag,{value:"Module"})),ge=e=>e.png_options||e.pngo,fo=e=>!!ge(e),go=e=>{const t=ge(e);n(t,"png_options");const{interlaced:r,quantize:o,quantization_colors:i}=t;return r&&p(r,"png_options.interlaced"),o&&p(o,"png_options.quantize"),i&&a(i,"png_options.quantization_colors",{addParam:{min:2,max:256}}),`pngo:${r===void 0?"":r}:${o===void 0?"":o}:${i||""}`.replace(/:+$/,"")},yo=Object.freeze(Object.defineProperty({__proto__:null,build:go,test:fo},Symbol.toStringTag,{value:"Module"})),ye=e=>e.preset||e.pr,$o=e=>!!ye(e),jo=e=>{const t=ye(e);if(n(t,"preset"),b(t,"preset"),t.some(r=>typeof r!="string"))throw new Error("preset option should contain only strings");return`pr:${t.join(":")}`},ho=Object.freeze(Object.defineProperty({__proto__:null,build:jo,test:$o},Symbol.toStringTag,{value:"Module"})),$e=e=>e.quality??e.q,vo=e=>!!$e(e),Oo=e=>{const t=$e(e);return n(t,"quality"),a(t,"quality",{addParam:{min:0,max:100}}),`q:${t}`},wo=Object.freeze(Object.defineProperty({__proto__:null,build:Oo,test:vo},Symbol.toStringTag,{value:"Module"})),je=e=>{if("raw"in e)return e.raw},So=e=>je(e)!==void 0,Po=e=>{const t=je(e);return n(t,"raw"),`raw:${s(t)}`},zo=Object.freeze(Object.defineProperty({__proto__:null,build:Po,test:So},Symbol.toStringTag,{value:"Module"})),xo={fit:!0,fill:!0,auto:!0,"fill-down":!0,force:!0},he=e=>e.resize||e.rs,To=e=>!!he(e),Mo=e=>{const t=he(e);n(t,"resize");const{resizing_type:r,width:o,height:i,enlarge:l}=t;r&&c(xo,r,"resize.resizing_type"),o&&a(o,"resize.width",{addParam:{min:0}}),i&&a(i,"resize.height",{addParam:{min:0}});const u=r||"",d=o||"",$=i||"",Be=l===void 0?"":s(l),We=h(t)?v(t,{headless:!0}):"";return`rs:${u}:${d}:${$}:${Be}:${We}`.replace(/:+$/,"")},ko=Object.freeze(Object.defineProperty({__proto__:null,build:Mo,test:To},Symbol.toStringTag,{value:"Module"})),qo={nearest:!0,linear:!0,cubic:!0,lanczos2:!0,lanczos3:!0},ve=e=>e.resizing_algorithm||e.ra,Eo=e=>!!ve(e),Io=e=>{const t=ve(e);return n(t,"resizing_algorithm"),c(qo,t,"resizing_algorithm"),`ra:${t}`},Ao=Object.freeze(Object.defineProperty({__proto__:null,build:Io,test:Eo},Symbol.toStringTag,{value:"Module"})),Uo={fit:!0,fill:!0,"fill-down":!0,force:!0,auto:!0},Oe=e=>e.resizing_type||e.rt,Ro=e=>!!Oe(e),No=e=>{const t=Oe(e);return n(t,"resizing_type"),c(Uo,t,"resizing_type"),`rt:${t}`},Fo=Object.freeze(Object.defineProperty({__proto__:null,build:No,test:Ro},Symbol.toStringTag,{value:"Module"})),we=e=>{if("return_attachment"in e)return e.return_attachment;if("att"in e)return e.att},Co=e=>we(e)!==void 0,Do=e=>{const t=we(e);return n(t,"return_attachment"),`att:${s(t)}`},Lo=Object.freeze(Object.defineProperty({__proto__:null,build:Do,test:Co},Symbol.toStringTag,{value:"Module"})),S={0:!0,90:!0,180:!0,270:!0},Se=e=>e.rotate??e.rot,Vo=e=>!!Se(e),Bo=e=>{const t=Se(e),r=`You can use values ${Object.keys(S).join(", ")}`;return n(t,"rotate"),a(t,"rotate",{addInfo:r}),c(S,t,"rotate"),`rot:${t}`},Wo=Object.freeze(Object.defineProperty({__proto__:null,build:Bo,test:Vo},Symbol.toStringTag,{value:"Module"})),Pe=e=>e.saturation??e.sa,Yo=e=>!!Pe(e),Xo=e=>{const t=Pe(e);return n(t,"saturation"),a(t,"saturation",{addParam:{min:0}}),`sa:${t}`},Ho=Object.freeze(Object.defineProperty({__proto__:null,build:Xo,test:Yo},Symbol.toStringTag,{value:"Module"})),ze=e=>e.sharpen??e.sh,Jo=e=>!!ze(e),Ko=e=>{const t=ze(e);return n(t,"sharpen"),a(t,"sharpen",{addParam:{min:0}}),`sh:${t}`},Qo=Object.freeze(Object.defineProperty({__proto__:null,build:Ko,test:Jo},Symbol.toStringTag,{value:"Module"})),xe=e=>e.size||e.s,Go=e=>!!xe(e),Zo=e=>{const t=xe(e);n(t,"size");const{width:r,height:o,enlarge:i}=t;r&&a(r,"size.width",{addParam:{min:0}}),o&&a(o,"size.height",{addParam:{min:0}});const l=r||"",u=o||"",d=i===void 0?"":s(i),$=h(t)?v(t,{headless:!0}):"";return`s:${l}:${u}:${d}:${$}`.replace(/:+$/,"")},en=Object.freeze(Object.defineProperty({__proto__:null,build:Zo,test:Go},Symbol.toStringTag,{value:"Module"})),P=["jpg","png","webp","avif","gif","ico","svg","heic","bmp","tiff","pdf","mp4"],Te=e=>e.skip_processing||e.sp,tn=e=>!!Te(e),rn=e=>{const t=Te(e);if(n(t,"skip_processing"),b(t,"skip_processing"),t.some(r=>!P.includes(r))){const r=`Valid values are: ${P.join(",")}`;throw new Error(`skip_processing option contains unsupported extension. ${r}`)}return`sp:${t.join(":")}`},on=Object.freeze(Object.defineProperty({__proto__:null,build:rn,test:tn},Symbol.toStringTag,{value:"Module"})),Me=e=>{if("strip_color_profile"in e)return e.strip_color_profile;if("scp"in e)return e.scp},nn=e=>Me(e)!==void 0,an=e=>{const t=Me(e);return n(t,"strip_color_profile"),`scp:${s(t)}`},ln=Object.freeze(Object.defineProperty({__proto__:null,build:an,test:nn},Symbol.toStringTag,{value:"Module"})),ke=e=>"strip_metadata"in e?e.strip_metadata:"sm"in e?e.sm:void 0,un=e=>ke(e)!==void 0,sn=e=>{const t=ke(e);return n(t,"strip_metadata"),`sm:${s(t)}`},dn=Object.freeze(Object.defineProperty({__proto__:null,build:sn,test:un},Symbol.toStringTag,{value:"Module"})),qe=e=>e.style||e.stl,_n=e=>!!qe(e),cn=e=>{const t=qe(e);return n(t,"style"),m(t,"style"),`stl:${t}`},mn=Object.freeze(Object.defineProperty({__proto__:null,build:cn,test:_n},Symbol.toStringTag,{value:"Module"})),Ee=e=>e.trim||e.t,pn=e=>!!Ee(e),bn=e=>{const t=Ee(e);n(t,"trim");const{threshold:r,color:o,equal_hor:i,equal_ver:l}=t;n(r,"trim.threshold"),a(r,"trim.threshold"),o&&m(o,"trim.color",!0);const u=i===void 0?"":s(i),d=l===void 0?"":s(l);return`t:${r}:${o||""}:${u}:${d}`.replace(/:+$/,"")},fn=Object.freeze(Object.defineProperty({__proto__:null,build:bn,test:pn},Symbol.toStringTag,{value:"Module"})),gn={auto:!0,none:!0,always:!0},Ie=e=>e.unsharp_masking||e.ush,yn=e=>!!Ie(e),$n=e=>{const t=Ie(e);n(t,"unsharp_masking");const{mode:r,weight:o,divider:i}=t;return r&&c(gn,r,"unsharp_masking.mode"),o!==void 0&&a(o,"unsharp_masking.weight",{addParam:{min:0,minEqual:!0}}),i!==void 0&&a(i,"unsharp_masking.divider",{addParam:{min:0,minEqual:!0}}),`ush:${r||""}:${o||""}:${i||""}`.replace(/:+$/,"")},jn=Object.freeze(Object.defineProperty({__proto__:null,build:$n,test:yn},Symbol.toStringTag,{value:"Module"})),Ae=e=>{if("video_thumbnail_second"in e)return e.video_thumbnail_second;if("vts"in e)return e.vts},hn=e=>Ae(e)!==void 0,vn=e=>{const t=Ae(e);return n(t,"video_thumbnail_second"),a(t,"video_thumbnail_second",{addParam:{min:1,isInt:!0}}),`vts:${t}`},On=Object.freeze(Object.defineProperty({__proto__:null,build:vn,test:hn},Symbol.toStringTag,{value:"Module"})),wn={ce:!0,no:!0,so:!0,ea:!0,we:!0,noea:!0,nowe:!0,soea:!0,sowe:!0,re:!0},Ue=e=>e.watermark||e.wm,Sn=e=>!!Ue(e),Pn=e=>{const t=Ue(e);n(t,"watermark");const{opacity:r,position:o,x_offset:i,y_offset:l,scale:u}=t;return n(r,"watermark.opacity"),a(r,"watermark.opacity",{addParam:{min:0,max:1}}),o&&(m(o,"watermark.position"),c(wn,o,"watermark.position")),i&&a(i,"watermark.x_offset"),l&&a(l,"watermark.y_offset"),u&&a(u,"watermark.scale"),`wm:${r}:${o||""}:${i||""}:${l||""}:${u||""}`.replace(/:+$/,"")},zn=Object.freeze(Object.defineProperty({__proto__:null,build:Pn,test:Sn},Symbol.toStringTag,{value:"Module"})),Re=e=>e.watermark_shadow??e.wmsh,xn=e=>!!Re(e),Tn=e=>{const t=Re(e);return n(t,"watermark_shadow"),a(t,"watermark_shadow",{addParam:{min:0}}),`wmsh:${t}`},Mn=Object.freeze(Object.defineProperty({__proto__:null,build:Tn,test:xn},Symbol.toStringTag,{value:"Module"})),Ne=e=>e.watermark_size||e.wms,kn=e=>!!Ne(e),qn=e=>{const t=Ne(e);n(t,"watermark_size");const{width:r,height:o}=t;return r&&a(r,"watermark_size.width",{addParam:{min:0}}),o&&a(o,"watermark_size.height",{addParam:{min:0}}),`wms:${r||""}:${o||""}`.replace(/:+$/,"")},En=Object.freeze(Object.defineProperty({__proto__:null,build:qn,test:kn},Symbol.toStringTag,{value:"Module"})),Fe=e=>e.watermark_text||e.wmt,In=e=>!!Fe(e),An=e=>{const t=Fe(e);return n(t,"watermark_text"),m(t,"watermark_text"),`wmt:${t}`},Un=Object.freeze(Object.defineProperty({__proto__:null,build:An,test:In},Symbol.toStringTag,{value:"Module"})),Ce=e=>e.watermark_url||e.wmu,Rn=e=>!!Ce(e),Nn=e=>{const t=Ce(e);return n(t,"watermark_url"),m(t,"watermark_url"),`wmu:${t}`},Fn=Object.freeze(Object.defineProperty({__proto__:null,build:Nn,test:Rn},Symbol.toStringTag,{value:"Module"})),Cn={lossy:!0,near_lossless:!0,lossless:!0},De=e=>e.webp_options||e.webpo,Dn=e=>!!De(e),Ln=e=>{const t=De(e);return n(t,"webp_options"),c(Cn,t,"webp_options"),`webpo:${t}`},Vn=Object.freeze(Object.defineProperty({__proto__:null,build:Ln,test:Dn},Symbol.toStringTag,{value:"Module"})),Le=e=>e.width??e.w,Bn=e=>!!Le(e),Wn=e=>{const t=Le(e);return n(t,"width"),a(t,"width",{addParam:{min:0}}),`w:${t}`},Yn=Object.freeze(Object.defineProperty({__proto__:null,build:Wn,test:Bn},Symbol.toStringTag,{value:"Module"})),j=(e,t)=>{n(e,t),a(e,t,{addParam:{min:0}})},Ve=e=>e.zoom||e.z,Xn=e=>!!Ve(e),Hn=e=>{const t=Ve(e);return n(t,"zoom"),typeof t=="string"&&a(t,"zoom"),typeof t=="number"?(j(t,"zoom"),`z:${t}`):(j(t.zoom_x,"zoom.zoom_x"),j(t.zoom_y,"zoom.zoom_y"),`z:${t.zoom_x}:${t.zoom_y}`)},Jn=Object.freeze(Object.defineProperty({__proto__:null,build:Hn,test:Xn},Symbol.toStringTag,{value:"Module"})),Kn=e=>e.wild_options,Qn=e=>!!Kn(e),Gn=e=>{const t=e.wild_options;if(n(t,"raw_options"),b(t,"raw_options"),!t.every(o=>Array.isArray(o)))throw new Error("raw_options is not an array of arrays");let r="";for(let o=0;o<t.length;o++){let i="";for(let l=0;l<t[o].length;l++)l>0&&(i+=":"),i+=t[o][l];o>0&&(r+="/"),r+=i}return r},Zn=Object.freeze(Object.defineProperty({__proto__:null,build:Gn,test:Qn},Symbol.toStringTag,{value:"Module"})),ei=Object.freeze(Object.defineProperty({__proto__:null,adjust:et,autoRotate:lt,autoquality:nt,background:dt,backgroundAlpha:mt,blur:ft,blurDetections:$t,brightness:vt,cacheBuster:St,contrast:xt,crop:Et,disableAnimation:Ut,dpi:Ft,dpr:Lt,drawDetections:Wt,enforceThumbnail:Ht,enlarge:Qt,expires:er,extend:rr,extendAspectRatio:ir,fallbackImageUrl:ur,filename:_r,format:br,formatQuality:yr,gradient:vr,gravity:Mt,height:Sr,jpegOptions:xr,keepCopyright:kr,maxAnimationFrameResolution:Rr,maxAnimationFrames:Ir,maxBytes:Cr,maxSrcFileSize:Xr,maxSrcResolution:Kr,minHeight:Zr,minWidth:ro,objectPosition:Br,padding:io,page:uo,pages:co,pixelate:bo,pngOptions:yo,preset:ho,quality:wo,raw:zo,resize:ko,resizingAlgorithm:Ao,resizingType:Fo,returnAttachment:Lo,rotate:Wo,saturation:Ho,sharpen:Qo,size:en,skipProcessing:on,stripColorProfile:ln,stripMetadata:dn,style:mn,trim:fn,unsharpMasking:jn,videoThumbnailSecond:On,watermark:zn,watermarkShadow:Mn,watermarkSize:En,watermarkText:Un,watermarkUrl:Fn,webpOptions:Vn,width:Yn,wildOptions:Zn,zoom:Jn},Symbol.toStringTag,{value:"Module"})),z={plain:!0,base64:!0,encrypted:!0},ti=(e,t)=>{n(e.value,"url.value","Must be a string"),n(e.type,"url.type",`Valid values are: ${Object.keys(z).join(", ")}`),c(z,e.type,"url.type");let r="";if(t)for(const[,i]of Object.entries(ei))i.test(t)&&(r+="/",r+=i.build(t));let o="";return o=`/plain/${e.value}`,`${r}${o}`};function O(e){return e.startsWith("http")}function ri(e){return e.startsWith("/cms")}function oi(e){return O(e)?e:`s3:/${e}`}function ni(e){return!ri(e)&&!O(e)}function ii(e){return/(.)+\.(mp4|svg|gif)$/.test(`${e}`)}function li(e){if(e===void 0)return;const t=typeof e=="string"?Number.parseInt(e,10):e;return Number.isNaN(t)?void 0:t}function ui(){const e=Ye(Ke),t=(e==null?void 0:e.baseURL)||Xe;function r(l){return O(l)?l:`${t}${l}`}function o(l,u){const d=ti({value:oi(l),type:"plain"},{...Je,...u});return`${t}${He}${d}`}return{generateUrl:(l,u)=>ni(l)?l:ii(l)?r(l):o(l,u)}}export{ui as u,li as v};
