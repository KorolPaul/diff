import{C as $,_ as E,g as G}from"./CanreSBL.js";import{_ as L}from"./D5A9IBSm.js";import{_ as T}from"./qGe41cgA.js";import{_ as K}from"./B2Y8sI9p.js";import{_ as R}from"./DnrtWxdD.js";import{a as U}from"./C3MdYnyV.js";import{_ as z,b as H,u as J,r as _,i as Q,K as W,x as y,p as X,w as Y,j as f,o as n,c as l,t as g,k as P,m as c,y as Z,F as tt,L as et}from"./Pd6RrLp1.js";const at={class:"subcategory-page"},ot={class:"subcategory-page_title"},rt={class:"subcategory-page_container"},nt={key:1,class:"subcategory-page_container"},st={__name:"subcategory-page",props:{data:{type:Object,required:!0},parentCategory:{type:Object,required:!0},seoContent:{type:Object,default:()=>{}},totalPages:{type:Number,required:!0},currentPage:{type:Number,required:!0},loading:{type:Boolean,default:!1},withCategoriesFilter:{type:Boolean,default:!1}},emits:["getSubcategoryData","changeProductSort","changeSubCategoryId"],async setup(e,{emit:F}){let d,C;const i=e,q=F,{locale:B,t:I}=H(),A=J(),b=_({}),j=A.name.includes("promotions"),{pushMindBoxEvent:D}=U(),M=t=>{b.value=t,q("getSubcategoryData",b.value)};Q(()=>{var t;i.data.category&&D("webCatalogCategoryView",(t=i.data.category)==null?void 0:t.id)});const{setIsAppleCategoryPage:N}=W(),h=y(()=>{var t,a,r,s;return(s=(r=(a=(t=i.data)==null?void 0:t.category)==null?void 0:a.contents)==null?void 0:r.find(u=>u.type==="promo-carousel"))==null?void 0:s.data}),S=y(()=>{var t;return(t=h.value)==null?void 0:t.categoryPromo}),o=S.value?([d,C]=X(()=>$.getFamilyStripe(S.value)),d=await d,C(),d):null,v=y(()=>{var a,r;const t=(a=o==null?void 0:o.data)==null?void 0:a.map(s=>{var u;return s.isAddToCart=((u=h.value)==null?void 0:u.isAddToCart)||!1,s});return(r=o==null?void 0:o.data)!=null&&r.length?{title:I("quick_checkout"),products:t,promoId:o==null?void 0:o.id}:null}),m=_([]),p=_(!0);Y(()=>{var t;return(t=i.data)==null?void 0:t.category},async(t,a)=>{if(p.value){const r=await G(t,B);m.value=r,p.value=!1}},{immediate:!0});const k=y(()=>{var t,a;return(a=(t=i.data)==null?void 0:t.category)==null?void 0:a.isOnlyMainProductsShown});return N(k.value),(t,a)=>{var w;const r=E,s=L,u=T,O=K,V=R;return n(),f("div",at,[(w=c(m))!=null&&w.length&&e.parentCategory&&!c(p)?(n(),l(r,{key:0,items:c(m),"category-name":e.parentCategory.name,"category-slug":e.parentCategory.slug},null,8,["items","category-name","category-slug"])):g("",!0),P("h1",ot,[P("div",rt,Z(e.data.category.name),1)]),e.data.category?(n(),f("div",nt,[!c(k)||c(j)?(n(),l(s,{key:0,products:e.data.category.products,subcategory:e.data.category,slug:e.data.category.slug,"total-pages":e.totalPages,"current-page":e.currentPage,loading:e.loading,"with-categories-filter":e.withCategoriesFilter,onGetSubcategoryData:M},null,8,["products","subcategory","slug","total-pages","current-page","loading","with-categories-filter"])):e.data.category.products?(n(!0),f(tt,{key:1},et(e.data.category.products,x=>(n(),l(u,{key:x.id,product:x},null,8,["product"]))),128)):g("",!0),c(v)?(n(),l(O,{key:2,data:c(v),class:"subcategory-page_quick-checkout"},null,8,["data"])):g("",!0),e.seoContent?(n(),l(V,{key:3,data:e.seoContent},null,8,["data"])):g("",!0)])):g("",!0)])}}},mt=z(st,[["__scopeId","data-v-b8e6364c"]]);export{mt as _};
