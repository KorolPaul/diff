import{_ as N}from"./B2Y8sI9p.js";import{P as D}from"./BMHaNUcL.js";import{u as O}from"./DGrriUvr.js";import{r as P,_ as $,b as R,x as S,c as x,t as E,m as i,o as a,u as A,G as V,g as T,j as p,k as u,y as C,F,L as U,z as j,l as d,O as Z,C as G,ag as H,w as z,i as q,a9 as J,E as K,ah as Q,P as W,q as X,f as Y}from"./Pd6RrLp1.js";import{_ as t2}from"./C1bY634J.js";import{u as o2}from"./Crd-_VjE.js";import{u as e2}from"./UMgXyzVE.js";import{u as s2}from"./Cc_MbB92.js";import{u as r2}from"./Cubs7ceE.js";import{_ as n2}from"./qKLLgZOX.js";import{u as i2}from"./B64m7KbU.js";import"./cdh4QgBc.js";import"./BrwUmeBJ.js";import"./0zS85Q81.js";import"./BJt_w7Hb.js";import"./QJ3VVsaT.js";import"./Cuh519_O.js";import"./CAC9vlZT.js";import"./BSts32E-.js";import"./CasWryfL.js";import"./C3MdYnyV.js";import"./DV533Gpo.js";import"./DcmtLR2x.js";import"./B4ouTiC0.js";import"./DQObz2Ym.js";import"./B-l2-lBV.js";import"./BRd7Y3HP.js";import"./BdleNovN.js";import"./T4kW5CUp.js";import"./CcjC4gLZ.js";import"./CuRHY0aD.js";const a2=()=>{const{getViewedProducts:e}=O(),s=P([]);return{viewedProducts:s,fetchViewed:async()=>{if(e.value.length<1)return;const o={searchFields:"slug:in",limit:9999,search:`slug:${e.value.join()}`},{data:r}=await D.getProducts(o);s.value=[...r.data]}}},c2={__name:"ViewedProducts",setup(e){const{viewedProducts:s,fetchViewed:c}=a2(),{t:o}=R(),r=S(()=>s.value?{title:o("previously_viewed"),products:s.value,promoId:"viewed"}:null);return c(),(f,_)=>{const m=N;return i(r)?(a(),x(m,{key:0,data:i(r),class:"viewed-products","without-padding":""},null,8,["data"])):E("",!0)}}},l2=$(c2,[["__scopeId","data-v-4cf4dbb8"]]),u2="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='48'%20height='48'%20viewBox='0%200%2048%2048'%20fill='none'%3e%3ccircle%20cx='24'%20cy='24'%20r='24'%20fill='%23F2F2F2'%20/%3e%3cpath%20d='M16.3094%2034.4915C14.6363%2034.4915%2013.7998%2033.9195%2013.7998%2032.7757C13.7998%2032.0131%2014.0294%2031.2077%2014.4885%2030.3595C14.9554%2029.5035%2015.6246%2028.702%2016.4961%2027.955C17.3676%2027.2002%2018.422%2026.5854%2019.6593%2026.1108C20.8966%2025.6361%2022.2973%2025.3987%2023.8614%2025.3987C25.4177%2025.3987%2026.8145%2025.6361%2028.0517%2026.1108C29.289%2026.5854%2030.3434%2027.2002%2031.2149%2027.955C32.0865%2028.702%2032.7518%2029.5035%2033.2109%2030.3595C33.6778%2031.2077%2033.9112%2032.0131%2033.9112%2032.7757C33.9112%2033.9195%2033.0708%2034.4915%2031.39%2034.4915H16.3094ZM15.9592%2033.1375H31.7635C32.0281%2033.1375%2032.211%2033.0986%2032.3121%2033.0208C32.4211%2032.9507%2032.4755%2032.8223%2032.4755%2032.6356C32.4755%2032.0753%2032.2849%2031.4606%2031.9036%2030.7914C31.5223%2030.1221%2030.962%2029.4802%2030.2228%2028.8654C29.4913%2028.2507%2028.5886%2027.7488%2027.5148%2027.3597C26.4487%2026.9628%2025.2309%2026.7644%2023.8614%2026.7644C22.484%2026.7644%2021.2584%2026.9628%2020.1846%2027.3597C19.1185%2027.7488%2018.2158%2028.2507%2017.4766%2028.8654C16.7451%2029.4802%2016.1887%2030.1221%2015.8074%2030.7914C15.4261%2031.4606%2015.2355%2032.0753%2015.2355%2032.6356C15.2355%2032.8223%2015.2861%2032.9507%2015.3872%2033.0208C15.4962%2033.0986%2015.6868%2033.1375%2015.9592%2033.1375ZM23.873%2023.7996C22.9626%2023.7996%2022.1377%2023.5623%2021.3985%2023.0876C20.6592%2022.6052%2020.0678%2021.9593%2019.6243%2021.15C19.1885%2020.3407%2018.9706%2019.442%2018.9706%2018.4537C18.9706%2017.4888%2019.1885%2016.6095%2019.6243%2015.8158C20.0678%2015.0221%2020.6592%2014.3879%2021.3985%2013.9132C22.1455%2013.4385%2022.9704%2013.2012%2023.873%2013.2012C24.7757%2013.2012%2025.5966%2013.4346%2026.3359%2013.9015C27.0829%2014.3684%2027.6743%2014.9987%2028.1101%2015.7924C28.5536%2016.5861%2028.7754%2017.4655%2028.7754%2018.4304C28.7754%2019.4264%2028.5536%2020.333%2028.1101%2021.15C27.6743%2021.9593%2027.0829%2022.6052%2026.3359%2023.0876C25.5966%2023.5623%2024.7757%2023.7996%2023.873%2023.7996ZM23.873%2022.4457C24.5111%2022.4457%2025.0908%2022.2667%2025.6122%2021.9087C26.1413%2021.5508%2026.5577%2021.0683%2026.8611%2020.4614C27.1724%2019.8544%2027.328%2019.1774%2027.328%2018.4304C27.328%2017.7067%2027.1724%2017.053%2026.8611%2016.4694C26.5499%2015.878%2026.1336%2015.4111%2025.6122%2015.0687C25.0908%2014.7264%2024.5111%2014.5552%2023.873%2014.5552C23.2349%2014.5552%2022.6513%2014.7302%2022.1222%2015.0804C21.6008%2015.4228%2021.1845%2015.8897%2020.8732%2016.4811C20.562%2017.0725%2020.4063%2017.73%2020.4063%2018.4537C20.4063%2019.2007%2020.562%2019.8777%2020.8732%2020.4847C21.1845%2021.0839%2021.6008%2021.5624%2022.1222%2021.9204C22.6513%2022.2706%2023.2349%2022.4457%2023.873%2022.4457Z'%20fill='%236E6E73'%20/%3e%3c/svg%3e",p2={class:"profile-sidebar"},d2={class:"profile-sidebar_avatar"},_2={class:"profile-sidebar_name"},m2={class:"profile-sidebar_menu"},f2={class:"profile-sidebar_button-title"},g2={class:"profile-sidebar_button-title"},C2={__name:"profile-sidebar",props:{profile:{type:Object,default:null}},emits:["setLoadingLogout"],setup(e,{emit:s}){const c=s,o=A(),r=V(),f=T(),{logout:_}=i2(),m=P([{icon:"loginIcon",title:"profile",url:"/account/info"},{icon:"orderIcon",title:"orders",url:"/account/orders"}]),k=S(()=>o.fullPath),g=l=>k.value.includes(l),h=()=>{c("setLoadingLogout"),_(),r.push(f.$localeRoute({path:"/"}))};return(l,v)=>{var L,w;const b=n2,y=G;return a(),p("div",p2,[u("div",d2,[v[0]||(v[0]=u("img",{src:u2,format:"svg",preload:""},null,-1)),u("span",_2,C((L=e.profile)==null?void 0:L.name)+" "+C((w=e.profile)==null?void 0:w.lastname),1)]),u("div",m2,[(a(!0),p(F,null,U(i(m),t=>(a(),x(y,{key:t.title,class:Z(["profile-sidebar_button",{"profile-sidebar_button__active":g(t.url)}]),to:l.localePath(t.url)},{default:j(()=>[d(b,{class:"profile-sidebar_button-icon",icon:t.icon},null,8,["icon"]),u("span",f2,C(l.$t(t.title)),1)]),_:2},1032,["class","to"]))),128)),u("button",{class:"profile-sidebar_button profile-sidebar_button__full-width",onClick:h},[d(b,{class:"profile-sidebar_button-icon profile-sidebar_button-icon__logout",icon:"logoutIcon"}),u("span",g2,C(l.$t("logout")),1)])])])}}},h2=$(C2,[["__scopeId","data-v-b728d078"]]),v2={class:"profile-main-section"},b2={__name:"profile-main-section",props:{profile:{type:Object,default:null}},emits:["setLoadingLogout"],setup(e,{emit:s}){return(c,o)=>{const r=H;return a(),p("div",v2,[d(h2,{profile:e.profile,onSetLoadingLogout:o[0]||(o[0]=f=>c.$emit("setLoadingLogout"))},null,8,["profile"]),d(r,{profile:e.profile},null,8,["profile"])])}}},w2=$(b2,[["__scopeId","data-v-3a330b8c"]]),P2={key:0,class:"profile"},$2={class:"profile_title"},k2={key:1},y2={key:1},L2={__name:"profile",emits:["endScrollTop"],setup(e,{emit:s}){const c=s,{getUser:o,isAuthUser:r}=e2(),{pushGtmEvent:f}=X(),_=A(),m=T(),k=V(),g=P(null),h=P(!1),{fetchError:l,setFetchError:v}=s2(),{setMetaToStaticPage:b}=r2(),y=S(()=>_.path.includes("order"));(async()=>{var t;try{const{data:n}=await W.getPageBySlug("profile");g.value=n==null?void 0:n.data}catch(n){v(n.response.status)}finally{f("pageview",{title:(t=g.value)==null?void 0:t.seo_title})}})();const w=()=>{k.push(m.$localeRoute({path:"/"}))};return z(()=>_.path,()=>{o2(0,()=>{c("endScrollTop",!1)})}),q(()=>{J("Auth-token").value||w()}),b(g),K(async()=>{const t=_.path.split("/"),n=t[t.length-1];["info","orders"].includes(n)||await Q(m.$localeRoute({path:"/account/info"}))}),(t,n)=>{const M=l2,B=t2,I=Y("AppError");return i(l)?(a(),p("div",y2,[d(I,{error:{statusCode:i(l)}},null,8,["error"])])):(a(),p("div",P2,[i(o)&&i(r)&&!i(h)?(a(),p(F,{key:0},[u("span",$2,C(t.$t("personal_account_title")),1),d(w2,{profile:i(o),onSetLoadingLogout:n[0]||(n[0]=S2=>h.value=!0)},null,8,["profile"]),i(y)?(a(),x(M,{key:0})):E("",!0)],64)):(a(),p("div",k2,[d(B)]))]))}}},n0=$(L2,[["__scopeId","data-v-e95df475"]]);export{n0 as default};
