import B from"./D0s6eemM.js";import{_ as I}from"./Dx0uk2nJ.js";import{u as M}from"./CyMuBQOc.js";import{d as E,r as g,x as l,j as V,k as c,c as w,t as $,m as u,y as j,l as A,o as k}from"./Pd6RrLp1.js";import"./Cuh519_O.js";import"./QJ3VVsaT.js";import"./1OVHT2GX.js";import"./qKLLgZOX.js";import"./T4kW5CUp.js";import"./CcjC4gLZ.js";import"./CCRCVzVF.js";import"./2WVDaFKk.js";import"./C3QHuKV1.js";import"./D_TJXMTY.js";import"./pvpDbLJt.js";import"./BoW1LxkV.js";import"./DK9X1TaX.js";import"./UMgXyzVE.js";import"./DxWnzEjH.js";import"./ChnuYSVO.js";import"./B4ouTiC0.js";import"./wu6KqT4O.js";const D={class:"store-locator"},G={class:"store-locator_map"},H={class:"store-locator_shops"},R={class:"store-locator_title"},Z={class:"store-locator_shops-holder"},ct=E({__name:"index",setup(q){const s=M(),a=g(null),p=g(0),d=l(()=>s.getSelectedShop),h=l(()=>{var t;return(t=s.shops)==null?void 0:t.find(o=>o.id===p.value)}),m=l(()=>s.getShops?s.getShops.filter(t=>t.types[0].key==="shop"):[]),_=l(()=>{var o,n,r,f;if(m.value.length===0)return{center:null,points:[]};const t=[];return m.value.forEach(i=>{i.addresses.forEach(e=>{var v,S;e.lat&&e.lon&&t.push({lat:Number(e.lat),lng:Number(e.lon),title:i.name,id:i.id,content:{name:i.name,worktime:e.workingHours,address:e.address,lat:e.lat,lon:e.lon,city:((S=(v=s.getCities)==null?void 0:v.find(x=>x.id===e.cityId))==null?void 0:S.name)||"",email:e.email||null,phone:e.phone}})})}),{center:{lat:((o=h.value)==null?void 0:o.addresses[0].lat)||((n=d.value)==null?void 0:n.addresses[0].lat),lng:((r=h.value)==null?void 0:r.addresses[0].lon)||((f=d.value)==null?void 0:f.addresses[0].lon)},points:t}}),y=t=>{try{a.value&&(a.value.setZoom(15),a.value.setCenter(t))}catch(o){console.error(o)}},C=t=>{a.value=t};function N(t){const o=m.value.find(n=>n.id===t);o&&(s.setSelectedShop(o),localStorage.setItem("shop",String(o.id)),y({lat:Number(o.addresses[0].lat),lng:Number(o.addresses[0].lon)}))}function b(t){p.value=t}return(t,o)=>{const n=B,r=I;return k(),V("div",D,[c("div",G,[u(_).points.length?(k(),w(n,{key:0,data:u(_),"active-shop-id":u(p),onInitMap:C},null,8,["data","active-shop-id"])):$("",!0)]),c("div",H,[c("h1",R,j(t.$t("stores")),1),c("div",Z,[A(r,{"full-cards":"",onSave:N,onChangeActiveShop:b})])])])}}});export{ct as default};
