import{_ as R}from"./C3QHuKV1.js";import{r as S,w as U,j as f,o as u,k as g,H as L,y as m,m as s,I as A,l as x,af as D,F as w,x as C,t as F,L as j,z as M,O as E,d as W,aa as T,ad as z,c as B,B as N}from"./Pd6RrLp1.js";import{u as H}from"./CasWryfL.js";import{_ as q}from"./pvpDbLJt.js";import{_ as G}from"./qKLLgZOX.js";import{_ as J}from"./1OVHT2GX.js";import{_ as Q}from"./C1bY634J.js";import{u as I}from"./ckAQI_px.js";import{u as X}from"./BSts32E-.js";const Y={class:"filter-item-price_description"},Z={class:"filter-item-price_inputs"},Ce={__name:"filter-item-price",props:{minPrice:{type:[Number,null],default:null},maxPrice:{type:[Number,null],default:null},defaultMinPrice:{type:Number,default:0},defaultMaxPrice:{type:Number,default:0},isLoading:{type:Boolean,default:!1}},emits:["updatePriceFilter"],setup(i,{emit:a}){const t=i,o=a,h=S(!1),n=S({min:t.minPrice,max:t.maxPrice}),{currencyMark:P}=H("",!0),k=c=>{c.key.length===1&&isNaN(Number(c.key))&&c.preventDefault()},y=(c,e)=>{if(!n.value.min&&!n.value.max){o("updatePriceFilter",{min:null,max:null});return}const b=c.target.value?parseInt(c.target.value,10):0,d=e==="min",l={min:Number(n.value.min),max:Number(n.value.max)};if(b>t.defaultMaxPrice){const v=d?t.defaultMinPrice:t.defaultMaxPrice;l[e]=v,n.value[e]=v}n.value.min&&n.value.max===null&&(l.max=t.defaultMaxPrice),l.min>=l.max&&(l.max?(l.min=l.max,n.value=l):l.max=t.defaultMaxPrice),o("updatePriceFilter",{...l})},r=()=>{h.value=!h.value};return U([()=>t.minPrice,()=>t.maxPrice],()=>{t.maxPrice===null&&t.maxPrice===null&&(n.value={min:null,max:null})}),(c,e)=>{const b=R;return u(),f(w,null,[g("button",{class:"filter-item-price_caption",onClick:r},m(c.$t("price"))+", "+m(s(P)),1),L(g("div",null,[g("p",Y,m(c.$t("highest_price"))+" "+m(i.defaultMaxPrice)+" "+m(s(P)),1),g("div",Z,[x(b,{modelValue:s(n).min,"onUpdate:modelValue":e[0]||(e[0]=d=>s(n).min=d),class:"filter-item-price_input",label:c.$t("from"),disabled:i.isLoading,onKeydown:k,onBlur:e[1]||(e[1]=d=>y(d,"min")),onKeyup:e[2]||(e[2]=D(d=>y(d,"min"),["enter"]))},null,8,["modelValue","label","disabled"]),x(b,{modelValue:s(n).max,"onUpdate:modelValue":e[3]||(e[3]=d=>s(n).max=d),class:"filter-item-price_input",label:c.$t("to"),disabled:i.isLoading,onKeydown:k,onBlur:e[4]||(e[4]=d=>y(d,"max")),onKeyup:e[5]||(e[5]=D(d=>y(d,"max"),["enter"]))},null,8,["modelValue","label","disabled"])])],512),[[A,!s(h)]])],64)}}},K=i=>new RegExp("\\p{L}","u").test(i),Fe=(i,a="",t=!1)=>{let o=`${i}`;if(t){const h=K(`${i}`);a&&K(`${a}`)&&!h&&(o=`${a}`)}return o.toLowerCase().split(" ").join("_")},ee={class:"filter-item"},te={class:"filter-item_content"},le=["onClick"],Se={__name:"filter-item",props:{caption:{type:String,default:""},filterId:{type:[String,Number],default:""},filterName:{type:String,default:""},filterItems:{type:Array,default:()=>[]},checked:{type:Array,default:()=>[]},isLoadingOnChangePage:{type:Boolean,default:!1},isDefaultCollapsed:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["onFilterChange","onDescriptionItemClick"],setup(i,{emit:a}){const t=i,o=a,h=S(!1),n=S(t.isDefaultCollapsed),P=()=>{h.value=!h.value},k=l=>!l.docCountWithUserFilter&&typeof l.docCountWithUserFilter=="number"&&!r.value[l.id],y=l=>{const $=l.map(String)?l.map(String):[String(l)],v=new Set($);return t.filterItems.reduce((p,_)=>{const O=String(_.id);return p[_.id]=v.has(O),p},{})},r=S(y(t.checked)),c=C(()=>t.checked.length||0),e=C(()=>h.value?t.filterItems:t.filterItems.slice(0,10)),b=()=>{n.value=!n.value},d=l=>typeof l.docCount=="number"?`(${l.docCountWithUserFilter||l.docCount})`:"";return U(()=>r.value,l=>{const $=Object.keys(l).filter(v=>l[v]);$.length!==t.checked.length&&o("onFilterChange",{id:t.filterId,name:t.filterName,value:$})},{deep:!0}),U(()=>t.checked,()=>{r.value=y(t.checked)}),(l,$)=>{const v=q;return u(),f("div",ee,[g("button",{class:"filter-item_caption",onClick:b},m(i.caption)+" "+m(s(c)?`(${s(c)})`:""),1),L(g("div",te,[(u(!0),f(w,null,j(s(e),p=>(u(),f("div",{key:p.id},[x(v,{modelValue:s(r)[p.id],"onUpdate:modelValue":_=>s(r)[p.id]=_,name:`${i.caption}-${p.id}`,disabled:i.isLoadingOnChangePage||k(p)||i.disabled,small:!0},{default:M(()=>[g("span",{class:E({"filter-item_label":k(p)||i.disabled})},m(p.name)+" "+m(d(p)),3)]),_:2},1032,["modelValue","onUpdate:modelValue","name","disabled"]),p.description?(u(),f("button",{key:0,class:"filter-item_description",type:"button",onClick:_=>o("onDescriptionItemClick",p.id)},m(p.description),9,le)):F("",!0)]))),128)),i.filterItems.length>10?(u(),f("div",{key:0,class:"filter-item_action",onClick:P},m(s(h)?`- ${l.$t("show_less")}`:`+ ${l.$t("show_more")}`),1)):F("",!0)],512),[[A,!s(n)]])])}}},ie=["disabled"],se={class:"chip_content"},oe=W({__name:"UiChip",props:{closable:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1},modelValue:{type:Boolean,default:!0}},emits:["click:close","update:modelValue","click"],setup(i,{emit:a}){const t=i,o=a,h=C(()=>!t.disabled),n=C(()=>!!t.closable),P=C(()=>({chip:!0,chip__disabled:t.disabled})),k=r=>{r.preventDefault(),r.stopPropagation(),o("click:close",r),o("update:modelValue",!1)},y=r=>{h.value&&o("click",r)};return(r,c)=>{const e=G;return r.modelValue?(u(),f("div",{key:0,class:E(s(P)),disabled:t.disabled,onClick:y},[g("div",se,[T(r.$slots,"default")]),s(n)?(u(),f("button",{key:0,class:"chip_close-button",type:"button",onClick:z(k,["stop","prevent"])},[x(e,{class:"chip_close-icon",icon:"closeThin"})])):F("",!0)],10,ie)):F("",!0)}}}),xe=i=>{const a={...i};return Object.keys(a).forEach(t=>{(a[t]===null||a[t]===void 0||a[t].length===0)&&delete a[t]}),a},V="filter_",Ie=()=>({getKeyWithoutPrefix:o=>o.slice(V.length),isExistFilterPrefix:o=>o.includes(V)&&o.length>V.length,addFilterPrefixToKey:o=>`${V}${o}`}),ne={class:"products-grid"},ae={class:"products-grid_filter"},re={class:"products-grid_content"},ce={class:"products-grid_top-filter"},de={class:"products-grid_total"},ue={key:0,class:"products-grid_tags"},me={key:0,class:"products-grid_grid"},pe={key:1,class:"products-grid_empty"},fe={key:1},Ve=W({__name:"products-grid",props:{products:{},loading:{type:Boolean},total:{},dropdownSortItems:{},filterSelectedTags:{},sortName:{},minPrice:{},maxPrice:{}},emits:["onRemoveTag","clearAllFilter","clearPriceFilter","handleSortChange"],setup(i,{emit:a}){const t=i,o=a,{currencyMark:h}=H("",!0),{formatPriceWithSpaces:n}=X(),P=S(t.sortName),k=C({get(){return P.value},set(e){P.value=e,o("handleSortChange",e)}}),y=()=>{o("clearAllFilter")},r=C(()=>(t.minPrice!==null||t.maxPrice!==null)&&t.maxPrice!==0),c=e=>`${n(e)} ${h.value}`;return(e,b)=>{var v,p;const d=oe,l=J,$=Q;return u(),f("div",ne,[g("div",ae,[T(e.$slots,"filter")]),g("div",re,[g("div",ce,[g("span",de,m(`${e.total||0} ${e.$t("products")}`),1),((v=e.filterSelectedTags)==null?void 0:v.length)>0||s(r)?(u(),f("div",ue,[(u(!0),f(w,null,j(e.filterSelectedTags,_=>(u(),B(d,{key:_.id,closable:"",disabled:"loading"in e?e.loading:s(I),"onClick:close":O=>e.$emit("onRemoveTag",_.id,_.key)},{default:M(()=>[N(m(_.name),1)]),_:2},1032,["disabled","onClick:close"]))),128)),s(r)?(u(),B(d,{key:0,class:"filters_selected-tag",closable:"",disabled:"loading"in e?e.loading:s(I),"onClick:close":b[0]||(b[0]=_=>e.$emit("clearPriceFilter"))},{default:M(()=>[N(m(`${c(e.minPrice)} - ${c(e.maxPrice)}`),1)]),_:1},8,["disabled"])):F("",!0)])):F("",!0),(p=e.dropdownSortItems)!=null&&p.length?(u(),B(l,{key:1,"model-value":s(k),class:"products-grid_sort","dropdown-class-name":"products-grid_sort-dropdown",options:e.dropdownSortItems,disabled:"loading"in e?e.loading:s(I),"show-item-label":"",ellipsis:"","show-active-icon":!1,small:"","onUpdate:modelValue":b[1]||(b[1]=_=>k.value=_)},null,8,["model-value","options","disabled"])):F("",!0)]),("loading"in e?e.loading:s(I))?(u(),f("div",fe,[x($)])):(u(),f(w,{key:0},[e.products.length?(u(),f("div",me,[T(e.$slots,"product")])):(u(),f("div",pe,[g("span",null,m(e.$t("product_not_found")),1),g("span",null,m(e.$t("use_fewer_filters")),1),b[2]||(b[2]=N(" "+m(" ")+" ")),g("button",{class:"products-grid_empty-button",onClick:y},m(e.$t("clear_all")),1)]))],64))])])}}});export{oe as _,Se as a,Ce as b,Ie as c,Ve as d,Fe as g,xe as u};
