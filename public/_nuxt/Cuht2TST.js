import{_ as Oe}from"./_2WRX4Kb.js";import{F as Re,k as Ne,u as Ee,r as ae,a as Ce,_ as Me}from"./BoW1LxkV.js";import{_ as $e}from"./qKLLgZOX.js";import{_ as ke}from"./C3QHuKV1.js";import{_ as X,r as V,x as q,j as x,t as oe,m as e,o as y,l as C,k as u,y as M,d as je,b as qe,w as re,O as Te,H as Fe,Q as Se,B as ie,F as se,L as he,z as Z,A as Ue,g as ge,G as Ge,c as de,ai as ze,D as ue,S as De,i as He,s as Ye,a8 as Qe,aj as Je}from"./Pd6RrLp1.js";import{_ as We}from"./CpOl9fd2.js";import{u as be}from"./CiYsyl20.js";import{A as ye,u as Xe}from"./B64m7KbU.js";import{u as ce}from"./UMgXyzVE.js";import{_ as Ze}from"./gj_0ZWSo.js";import{_ as Ie}from"./2WVDaFKk.js";import{u as Ke}from"./CMIk84tJ.js";import{_ as et}from"./1OVHT2GX.js";import{_ as tt}from"./DK9X1TaX.js";import"./ckAQI_px.js";import"./C3MdYnyV.js";import"./DV533Gpo.js";import"./DcmtLR2x.js";import"./B4ouTiC0.js";import"./CcjC4gLZ.js";import"./km7Iw1uL.js";import"./T4kW5CUp.js";function le(p){return p==null?void 0:p.replace(/[^\p{L}.,'"`\-–—:]/gu,"")}const at={key:0,class:"profile-social-accounts"},ot={class:"profile-social-accounts_title"},st={__name:"profile-social-accounts",props:{socialAccounts:{type:Array,default:()=>[]}},setup(p){const m=p,o=V({apple:"authApple",google:"authGoogle",facebook:"authFacebook"}),d=q(()=>{var _;const B=(_=m.socialAccounts)==null?void 0:_[0];if(!B)return null;const k=o.value[B.provider];return k?{...B,icon:k}:null});return(B,k)=>{const _=$e;return e(d)?(y(),x("div",at,[C(_,{icon:e(d).icon,class:"profile-social-accounts_icon"},null,8,["icon"]),u("span",ot,M(e(d).name),1)])):oe("",!0)}}},nt=X(st,[["__scopeId","data-v-0050a8b6"]]),lt=["value"],rt={class:"text-input_label"},it={key:0,class:"text-input_errors"},_e=2,fe=2,ve=4,dt="##.##.####",ut=je({__name:"DateInput",props:{label:{},modelValue:{},errors:{},required:{type:Boolean}},emits:["update:modelValue"],setup(p,{emit:m}){const{t:o}=qe(),d=p,B=m,k=_e+fe+ve,_=V(d.errors),w=V(dt),D=q({get(){if(!d.modelValue)return"";const f=w.value;return new Re({mask:f}).masked(d.modelValue)},set(f){B("update:modelValue",f)}}),L=q(()=>{const f=D.value.split("."),[i,v,h]=f,N=Number(i),s=Number(v),T=Number(h),U=(P,g)=>new Date(P,g,0).getDate(),t=()=>i.length<_e?!0:(h==null?void 0:h.length)===ve&&(v==null?void 0:v.length)===fe&&(N<1||N>U(T,s))?!1:N>=1&&N<=31,A=()=>!s||v.length<fe?!0:s>=1&&s<=12,O=()=>!T||h.length<ve?!0:T>=1900&&T<=new Date().getFullYear(),a=()=>(h==null?void 0:h.length)<ve||(v==null?void 0:v.length)<fe||(i==null?void 0:i.length)<_e?!0:new Date(T,s-1,N)<new Date,$=f.join("").length;return $<=_e?t():$<=_e+fe?t()&&A():t()&&A()&&O()&&a()}),b=f=>{L.value?_.value=_.value.filter(i=>i!=="invalid_date"):_.value.includes("invalid_date")||_.value.push("invalid_date"),B("update:modelValue",f)},c=f=>{const v=f.split(".").join("").length;v>0&&v<k&&!_.value.includes("invalid_date")&&_.value.push("invalid_date")};return re(()=>d.errors,()=>_.value=d.errors),(f,i)=>{var v;return y(),x("label",{class:Te(["text-input",{error:(v=e(_))==null?void 0:v.length}])},[Fe(u("input",Se({...f.$attrs},{class:"text-input_input",type:"text",value:e(D),placeholder:" ",onInput:i[0]||(i[0]=h=>b(h.target.value)),onBlur:i[1]||(i[1]=h=>c(h.target.value))}),null,16,lt),[[e(Ne),e(w)]]),u("span",rt,[ie(M(e(o)(f.label)),1),f.required?(y(),x(se,{key:0},[ie("*")],64)):oe("",!0)]),e(_)?(y(),x("div",it,[(y(!0),x(se,null,he(e(_),h=>(y(),x("span",{key:h},M(e(o)(h)),1))),128))])):oe("",!0)],2)}}}),ct=X(ut,[["__scopeId","data-v-46143b41"]]),Ae=()=>{const p=V(""),m=V(null),o=V(null),d=V([]),{setUser:B,getUser:k}=ce();return{saveAccountData:async D=>{var b,c;const L={email:D.email,name:D.name,phone:D.phone,sex:D.sex,lastname:D.lastname,birth_date:D.birth_date||D.date,language:D.language,addresses:D.addresses};try{const f={...k.value,...L},i=await ye.patchProfile(f);return(i==null?void 0:i.status.value)==="success"&&(B(Object.assign(k.value,i.data.value.data,D)),m.value=i==null?void 0:i.status.value,p.value="your_new_data_has_been_successfully_saved"),{status:i==null?void 0:i.status.value,errors:(c=(b=i==null?void 0:i.error.value)==null?void 0:b.data)==null?void 0:c.errors}}catch(f){if(f.response){const{data:i,status:v}=f.response;return{errors:i.errors,status:v}}else return{errors:["Unexpected error"]}}},popupSuccessText:p,statusCode:m,profile:o,errorData:d,clearErrorData:()=>{d.value=[]}}},pt={class:"confirm-delete-modal"},mt={class:"confirm-delete-modal_title"},_t={class:"confirm-delete-modal_description"},ft={__name:"confirm-delete-modal",props:{loading:{type:Boolean,default:!1},title:{type:String,default:""},description:{type:String,default:""}},emits:["cancel","confirm"],setup(p,{emit:m}){return(o,d)=>{const B=Ue;return y(),x("div",pt,[u("span",mt,M(o.$t(p.title)),1),u("p",_t,M(o.$t(p.description)),1),C(B,{disabled:p.loading,"full-width":"",onClick:d[0]||(d[0]=k=>o.$emit("cancel"))},{default:Z(()=>[ie(M(o.$t("cancel")),1)]),_:1},8,["disabled"]),C(B,{disabled:p.loading,secondary:"","full-width":"",onClick:d[1]||(d[1]=k=>o.$emit("confirm"))},{default:Z(()=>[ie(M(o.$t("delete")),1)]),_:1},8,["disabled"])])}}},Pe=X(ft,[["__scopeId","data-v-c55529d4"]]),vt={class:"profile-delete-data"},ht={class:"profile-delete-data_content"},bt={key:1,class:"profile-delete-data_code"},$t={__name:"profile-delete-data",props:{login:{type:String,required:!0}},setup(p){const m=p,{isLoading:o,startLoading:d,stopLoading:B}=be(),k=ge(),_=Ge(),{setUser:w}=ce(),{sendCode:D,deleteBearerToken:L,removeTokenInCookies:b}=Xe(),c=V(!1),f=V(""),i=V(""),v=V([]),h=()=>{b(),L(),w(null),_.push(k.$localeRoute({path:"/"}))},N=()=>{f.value="confirm-action",v.value=[],c.value=!0},s=async()=>{var A;if(o.value)return;d();const t=await D(m.login);((A=t==null?void 0:t.status)==null?void 0:A.value)==="success"?f.value="enter-code":console.log(t),B()},T=()=>{var t,A;try{f.value="success",c.value=!1,h()}catch(O){(A=(t=O.response)==null?void 0:t.data)!=null&&A.errors?v.value=Object.values(O.response.data.errors).flat():v.value=["An unexpected error occurred. Please try again."]}},U=t=>{typeof t=="string"&&(i.value=t)};return(t,A)=>{const O=Pe,a=Ze,$=Ie;return y(),x("div",vt,[u("button",{class:"profile-delete-data_title",onClick:N},M(t.$t("delete_account")),1),C($,{modelValue:e(c),"onUpdate:modelValue":A[2]||(A[2]=P=>ue(c)?c.value=P:null),group:e(ze).main,"padding-modal":!1,"close-btn":e(f)==="enter-code","max-width":600,"full-height":"",onClose:A[3]||(A[3]=P=>c.value=!1)},{default:Z(()=>[u("div",ht,[e(f)==="confirm-action"?(y(),de(O,{key:0,loading:e(o),title:"deleting_account",description:"deleting_account_description",onConfirm:s,onCancel:A[0]||(A[0]=P=>c.value=!1)},null,8,["loading"])):e(f)==="enter-code"?(y(),x("div",bt,[C(a,{"login-value":p.login,code:e(i),"delete-account-type":"",onChange:A[1]||(A[1]=P=>U(P)),onSuccess:T},null,8,["login-value","code"])])):oe("",!0)])]),_:1},8,["modelValue","group","close-btn"])])}}},gt=X($t,[["__scopeId","data-v-8881c6d9"]]),yt={class:"profile-personal-data"},It={class:"profile-personal-data_title"},Vt={class:"profile-personal-data_user-data"},Dt={class:"profile-personal-data_input-container"},Et={key:0,class:"profile-personal-data_confirmed"},Ct={class:"profile-personal-data_confirmed-text"},Mt={class:"profile-personal-data_input-container"},kt={key:0,class:"profile-personal-data_confirmed"},Ut={class:"profile-personal-data_confirmed-text"},At={class:"profile-personal-data_user-data-wrapper"},Pt={class:"profile-personal-data_user-data"},xt={class:"profile-personal-data_user-data"},wt={class:"profile-personal-data_user-gender"},Bt={class:"profile-personal-data_user-gender-title"},Lt=["disabled"],Ot={__name:"profile-personal-data",props:{profile:{type:Object,default:null},errorData:{type:Array,default:()=>[]}},setup(p){var W;const m=p,o=(r,l)=>{if(!r)return null;const[E,G]=r.includes("-")?["dash","-"]:["dot","."];return E===l?r:r.split(G).reverse().join(l==="dash"?"-":".")},d={phone:m.profile.phone??"",email:m.profile.email??"",name:m.profile.name??"",lastname:m.profile.lastname??"",birth_date:m.profile.birth_date??"",sex:m.profile.sex??"",userType:"b2c",country:"PL"},k=ge().$i18n,{getUser:_}=ce(),w=V(!0),D=V(["male","female"]),L=V(((W=m.profile)==null?void 0:W.sex)||null),b=V(o(m.profile.birth_date,"dash")),{isLoading:c,startLoading:f,stopLoading:i}=be(),{getErrors:v,defaultRequiredMessage:h,defaultPhoneRequiredMessage:N,setInternalizationToExternalErrors:s,emailPattern:T}=Ee(),{saveAccountData:U}=Ae(),t=De({...d});Object.keys(t).forEach(r=>{m.profile[r]&&(t[r]=r==="birth_date"?o(m.profile[r],"dot"):m.profile[r])});const O=V({}),a=r=>l=>(t[r]&&(t[r]=le(l)),le(l)),$=V({email:{emailPattern:T,requiredIf:ae(()=>!t.phone)},phone:{defaultPhoneRequiredMessage:N,requiredIf:ae(()=>!t.email)},name:{defaultRequiredMessage:h},lastname:{requiredIf:ae(!1)},birth_date:{requiredIf:ae(!1)}}),P=r=>{t.sex=r.toLowerCase()},g=Ce($,t,{$externalResults:O}),F=q(()=>v(g.value.name)),j=q(()=>v(g.value.lastname)),Y=q(()=>v(g.value.birth_date)),Q=q(()=>v(g.value.phone)),pe=q(()=>v(g.value.email)),S=r=>{var l,E,G,ne;(E=(l=g.value)==null?void 0:l[r])==null||E.$touch(),(r==="phone"||r==="email")&&((ne=(G=g.value)==null?void 0:G[r==="phone"?"email":"phone"])==null||ne.$touch())},n=De({personalData:!0}),J=r=>{Object.keys(n).forEach(l=>{n[l]=r===l})},H=()=>{var r;(r=g.value)==null||r.$reset(),Object.keys(n).forEach(l=>{n[l]=!0})},K=r=>{O.value=r},z=()=>{t.language=k.locale},ee=(r,l)=>{t[r]=l;const E={};Object.keys(O.value).forEach(G=>{r!==G&&(E[G]=O.value[G])}),O.value=E},te=()=>!g.value.name.$error&&!g.value.lastname.$error&&(!g.value.email.$error||!g.value.phone.$error),I=async()=>{try{if(f(),J("personalData"),Object.keys(g.value).forEach(E=>{Object.keys(t).find(G=>G===E)&&g.value[E].$touch()}),!te()){i();return}z();const r={..._.value,...t,birth_date:b.value},l=await U(r);if(l.status==="success")H(),Object.assign(_.value,t);else if(l.errors){const E=s(l.errors);K(E)}}catch(r){console.error(r)}finally{i()}};return(()=>{K([])})(),Ke({title:k.t("profile")}),re(()=>[t,Q,pe,F,j,Y],()=>{const r=Object.keys(t).some(E=>{var G;return E==="userType"||E==="country"?!1:E==="birth_date"?o(t[E],"dash")!==m.profile[E]&&t[E]!==null&&t[E]!==""&&((G=t[E])==null?void 0:G.length)===10:t[E]!==m.profile[E]&&t[E]!==null&&t[E]!==""}),l=[Q,pe,F,j,Y].some(E=>E.value.length);w.value=!r||l},{deep:!0}),re(()=>t.birth_date,()=>{t.birth_date.length===10&&(b.value=o(t.birth_date,"dash"))}),(r,l)=>{const E=Me,G=$e,ne=ke,xe=nt,we=ct,Be=We;return y(),x("div",yt,[u("div",null,[u("span",It,M(r.$t("personal_data")),1),u("div",null,[u("div",Vt,[u("div",Dt,[C(E,{modelValue:e(t).phone,"onUpdate:modelValue":l[0]||(l[0]=R=>e(t).phone=R),"validation-enabled":e(n).personalData,errors:e(Q),label:"write_phone_number","data-attributes":{field:e(t).phone},type:"phone",disabled:e(c),onBlur:l[1]||(l[1]=R=>S("phone"))},null,8,["modelValue","validation-enabled","errors","data-attributes","disabled"]),m.profile.statuses.is_phone_verified?(y(),x("div",Et,[C(G,{icon:"confirmedIcon",class:"profile-personal-data_confirmed-icon"}),u("span",Ct,M(r.$t("confirmed")),1)])):oe("",!0)]),u("div",Mt,[C(ne,{modelValue:e(g).email.$model,"onUpdate:modelValue":l[2]||(l[2]=R=>e(g).email.$model=R),errors:e(pe),"validation-enabled":e(n).personalData,label:"email",disabled:e(c),type:"email",onBlur:l[3]||(l[3]=R=>S("email"))},null,8,["modelValue","errors","validation-enabled","disabled"]),m.profile.statuses.is_email_verified?(y(),x("div",kt,[C(G,{icon:"confirmedIcon",class:"profile-personal-data_confirmed-icon"}),u("span",Ut,M(r.$t("confirmed")),1)])):oe("",!0)])]),C(xe,{"social-accounts":p.profile.social_accounts},null,8,["social-accounts"])])]),u("div",At,[u("div",Pt,[C(ne,{modelValue:e(t).name,"onUpdate:modelValue":l[4]||(l[4]=R=>e(t).name=R),errors:e(F),label:"name","validation-enabled":e(n).personalData,maxlength:"30",required:"",disabled:e(c),"handle-input":a("name"),onChange:l[5]||(l[5]=R=>ee("name",e(le)(R.target.value))),onBlur:l[6]||(l[6]=R=>S("name"))},null,8,["modelValue","errors","validation-enabled","disabled","handle-input"]),C(ne,{modelValue:e(t).lastname,"onUpdate:modelValue":l[7]||(l[7]=R=>e(t).lastname=R),errors:e(j),label:"surname",maxlength:"30","validation-enabled":e(n).personalData,disabled:e(c),"handle-input":a("lastname"),onChange:l[8]||(l[8]=R=>ee("lastname",e(le)(R.target.value)))},null,8,["modelValue","errors","validation-enabled","disabled","handle-input"])]),u("div",xt,[C(we,{modelValue:e(t).birth_date,"onUpdate:modelValue":l[9]||(l[9]=R=>e(t).birth_date=R),label:"birthday","validation-enabled":e(n).personalData,errors:e(Y),"data-attributes":{field:e(t).birth_date},disabled:e(c),onChange:l[10]||(l[10]=R=>ee("birth_date",R.target.value))},null,8,["modelValue","validation-enabled","errors","data-attributes","disabled"]),u("div",wt,[u("span",Bt,M(r.$t("gender"))+": ",1),(y(!0),x(se,null,he(e(D),(R,Le)=>(y(),de(Be,{key:Le,modelValue:e(L),"onUpdate:modelValue":l[11]||(l[11]=Ve=>ue(L)?L.value=Ve:null),checked:e(L)===R,disabled:e(c),name:R,value:R,label:"",onChange:Ve=>P(R)},{label:Z(()=>[ie(M(r.$t(R)),1)]),_:2},1032,["modelValue","checked","disabled","name","value","onChange"]))),128))])])]),u("button",{class:"profile-personal-data_save-button",disabled:e(c)||e(w),onClick:I},M(r.$t("save")),9,Lt),C(gt,{login:e(t).email||e(t).phone},null,8,["login"])])}}},Rt=X(Ot,[["__scopeId","data-v-7c319ab8"]]),Nt={class:"remove-modal"},jt={__name:"remove-modal",props:{title:{type:String,default:""},description:{type:String,default:""},activeItem:{type:Object,default:()=>({})},removeEmptyDataModal:{type:Boolean,default:!1},isRemoveModalOpened:{type:Boolean,default:!1}},emits:["close","update","update:remove-empty-data-modal"],setup(p,{emit:m}){const o=p,d=m,{setUser:B,getUser:k,setMainUserAddress:_}=ce(),{isLoading:w,startLoading:D,stopLoading:L}=be(),b=V(k),c=q(()=>o.isRemoveModalOpened),f=async()=>{var v,h,N,s,T,U;D();try{const t=((h=(v=b.value)==null?void 0:v[o.activeItem.type])==null?void 0:h.filter(a=>a.id!==o.activeItem.id))||[];t.length&&(t.find(a=>a.is_primary)||(t[0].is_primary=!0));const A={...b.value,[o.activeItem.type]:t},O=await ye.patchProfile(A);o.activeItem.type==="addresses"&&_((T=(s=(N=O==null?void 0:O.data)==null?void 0:N.value)==null?void 0:s.data)==null?void 0:T.addresses),((U=O==null?void 0:O.status)==null?void 0:U.value)==="success"&&(B(A),d("update",A),d("close"))}catch(t){console.error(t)}finally{L()}},i=()=>{o.removeEmptyDataModal===!0&&d("update:remove-empty-data-modal",!1),d("close")};return(v,h)=>{const N=Pe,s=Ie;return y(),de(s,{modelValue:e(c),"onUpdate:modelValue":[h[0]||(h[0]=T=>ue(c)?c.value=T:null),h[1]||(h[1]=T=>d("close"))],"max-width":600,"full-height":""},{default:Z(()=>[u("div",Nt,[C(N,{loading:e(w),title:p.title,description:p.description,onConfirm:f,onCancel:i},null,8,["loading","title","description"])])]),_:1},8,["modelValue"])}}},qt=X(jt,[["__scopeId","data-v-b35fbe8b"]]),Tt={class:"edit-modal"},Ft={class:"edit-modal_title"},St={__name:"edit-modal",props:{title:{type:String,default:""},activeItem:{type:Object,default:()=>({})},isEditModalOpened:{type:Boolean,default:!1}},emits:["close","update","openDeleteModal"],setup(p,{emit:m}){const o=p,d=m,{setUser:B,getUser:k,setMainUserAddress:_}=ce(),{isLoading:w,startLoading:D,stopLoading:L}=be(),{getErrors:b,defaultRequiredMessage:c,defaultPhoneRequiredMessage:f}=Ee(),i=q(()=>o.isEditModalOpened),v=V(k),h=V({}),N=V({}),s=V({}),T=V({apartment_number:{requiredIf:ae(!1)},city:{defaultRequiredMessage:c},house_number:{defaultRequiredMessage:c},lastname:{requiredIf:ae(!1)},name:{requiredIf:ae(!1)},phone:{defaultPhoneRequiredMessage:f},street:{defaultRequiredMessage:c}}),U=Ce(T,s),t=q(()=>b(U.value.apartment_number)),A=q(()=>b(U.value.city)),O=q(()=>b(U.value.house_number)),a=q(()=>b(U.value.lastname)),$=q(()=>b(U.value.name)),P=q(()=>b(U.value.phone)),g=q(()=>b(U.value.street)),F=S=>n=>(s.value[S]&&(s.value[S]=le(n)),le(n)),j=S=>{var n,J;(J=(n=U.value)==null?void 0:n[S])==null||J.$touch()},Y=()=>o.activeItem.type==="addresses"?!U.value.apartment_number.$error&&!U.value.city.$error&&!U.value.house_number.$error&&!U.value.street.$error:!U.value.lastname.$error&&!U.value.name.$error&&!U.value.phone.$error,Q=q(()=>o.activeItem.type==="addresses"?s.value.apartment_number!==h.value.apartment_number||s.value.city!==h.value.city||s.value.house_number!==h.value.house_number||s.value.street!==h.value.street:s.value.first_name!==N.value.first_name||s.value.last_name!==N.value.last_name||s.value.phone!==N.value.phone),pe=async()=>{var S,n,J,H,K;if(o.activeItem.type==="recipients"&&!s.value.first_name&&!s.value.last_name&&!s.value.phone){d("openDeleteModal");return}try{D();const z=((S=v.value)==null?void 0:S[o.activeItem.type])||[];z.length&&(z.reduce((W,r)=>r.is_primary?W+1:W,0)>1?(z.forEach(W=>W.is_primary=!1),z[0].is_primary=!0):z.find(W=>W.is_primary)||(z[0].is_primary=!0));const ee=z.map(me=>me.id===o.activeItem.id?{...me,...s.value}:me),te={...v.value,[o.activeItem.type]:ee},I=await ye.patchProfile(te);o.activeItem.type==="addresses"&&_((H=(J=(n=I==null?void 0:I.data)==null?void 0:n.value)==null?void 0:J.data)==null?void 0:H.addresses),((K=I==null?void 0:I.status)==null?void 0:K.value)==="success"&&(B(te),d("update",te),d("close"))}catch(z){console.error(z)}finally{L()}};return re(()=>o.isEditModalOpened,S=>{S&&(h.value={apartment_number:o.activeItem.apartment_number,city:o.activeItem.city_name,house_number:o.activeItem.house_number,street:o.activeItem.street},N.value={first_name:o.activeItem.first_name,last_name:o.activeItem.last_name,phone:o.activeItem.phone},s.value=o.activeItem.type==="addresses"?{...h.value}:{...N.value})}),(S,n)=>{const J=et,H=ke,K=Me,z=Ue,ee=tt,te=Ie;return y(),de(te,{modelValue:e(i),"onUpdate:modelValue":[n[12]||(n[12]=I=>ue(i)?i.value=I:null),n[13]||(n[13]=I=>d("close"))],"max-width":600,"full-height":""},{default:Z(()=>[u("div",Tt,[C(ee,null,{default:Z(()=>[u("span",Ft,M(S.$t(p.title)),1),p.activeItem.type==="addresses"?(y(),x(se,{key:0},[C(J,{modelValue:e(s).city,"onUpdate:modelValue":n[0]||(n[0]=I=>e(s).city=I),errors:e(A),label:"city",required:"","with-icon":"",icon:"searchIcon",disabled:""},null,8,["modelValue","errors"]),C(H,{modelValue:e(s).street,"onUpdate:modelValue":n[1]||(n[1]=I=>e(s).street=I),disabled:e(w),errors:e(g),height:55,label:"street",required:"",onBlur:n[2]||(n[2]=I=>j("street"))},null,8,["modelValue","disabled","errors"]),C(H,{modelValue:e(s).house_number,"onUpdate:modelValue":n[3]||(n[3]=I=>e(s).house_number=I),disabled:e(w),errors:e(O),height:55,label:"house_number",required:"",onBlur:n[4]||(n[4]=I=>j("house_number"))},null,8,["modelValue","disabled","errors"]),C(H,{modelValue:e(s).apartment_number,"onUpdate:modelValue":n[5]||(n[5]=I=>e(s).apartment_number=I),disabled:e(w),errors:e(t),height:55,label:"apartment_number"},null,8,["modelValue","disabled","errors"])],64)):(y(),x(se,{key:1},[C(H,{modelValue:e(s).first_name,"onUpdate:modelValue":n[6]||(n[6]=I=>e(s).first_name=I),disabled:e(w),errors:e($),"handle-input":F("name"),label:"name",maxlength:"30",onBlur:n[7]||(n[7]=I=>j("name"))},null,8,["modelValue","disabled","errors","handle-input"]),C(H,{modelValue:e(s).last_name,"onUpdate:modelValue":n[8]||(n[8]=I=>e(s).last_name=I),disabled:e(w),errors:e(a),"handle-input":F("lastname"),label:"surname",maxlength:"30",onBlur:n[9]||(n[9]=I=>j("lastname"))},null,8,["modelValue","disabled","errors","handle-input"]),C(K,{modelValue:e(s).phone,"onUpdate:modelValue":n[10]||(n[10]=I=>e(s).phone=I),"data-attributes":{field:e(s).phone},disabled:e(w),errors:e(P),label:"write_phone_number",onBlur:n[11]||(n[11]=I=>j("phone"))},null,8,["modelValue","data-attributes","disabled","errors"])],64)),C(z,{disabled:e(w)||!Y||!e(Q),"full-width":"",onClick:pe},{default:Z(()=>[ie(M(S.$t("save")),1)]),_:1},8,["disabled"])]),_:1})])]),_:1},8,["modelValue"])}}},Gt=X(St,[["__scopeId","data-v-fff47dd5"]]),zt={class:"profile-address"},Ht={class:"profile-address_content-wrapper"},Yt={class:"profile-address_title"},Qt={key:0,class:"profile-address_content"},Jt={class:"profile-address_item-header"},Wt={class:"profile-address_item-title"},Xt={class:"profile-address_item-info"},Zt={class:"profile-address_item-actions"},Kt=["onClick"],ea=["onClick"],ta={key:1,class:"profile-address_empty-state"},aa={class:"profile-address_content-wrapper"},oa={class:"profile-address_title"},sa={key:0,class:"profile-address_content"},na={class:"profile-address_item-header"},la={class:"profile-address_item-title"},ra={class:"profile-address_item-info"},ia={key:0,class:"profile-address_item-actions"},da=["onClick"],ua=["onClick"],ca={key:1,class:"profile-address_empty-state"},pa={__name:"profile-address",props:{profile:{type:Object,default:null},tab:{type:String,default:""}},setup(p){var O;const m=p,d=ge().$i18n,{mainUserAddress:B,getUser:k}=ce(),_=V(m.profile),w=V(!1),D=V(!1),L=V(!1),b=V({id:null,type:null}),c=V((O=_.value.addresses)!=null&&O.length?_.value.addresses[0]:[]),f=q(()=>b.value.type==="addresses"?"remove_address_modal_title":"remove_recipient_modal_title"),i=q(()=>b.value.type==="addresses"?"remove_address_modal_text":"remove_recipient_modal_text"),v=q(()=>{var a,$,P,g,F;return[{id:(a=k.value)==null?void 0:a.id,first_name:($=k.value)==null?void 0:$.name,last_name:(P=k.value)==null?void 0:P.lastname,phone:(g=k.value)==null?void 0:g.phone,isMyProfile:!0},...((F=m.profile)==null?void 0:F.recipients)??[]]}),h=a=>{var F;const $=(F=k.value)!=null&&F.is_partner_company_employee?`${a.country_name}, `:"",P=a.zip_code?`${a.zip_code}, `:"",g=a.apartment_number?`, ${a.apartment_number}`:"";return`${$}${P} ${a.city_name}, ${d.t("short_street")} ${a.street}, ${a.house_number}${g}`},N=a=>{const $=(a==null?void 0:a.first_name)||a.name||"",P=(a==null?void 0:a.last_name)||a.lastname||"",g=a!=null&&a.phone?`| ${a.phone}`:"";return`${$} ${P} ${g}`},s=(a,$)=>{var g;const P=(g=_.value[$])==null?void 0:g.find(F=>F.id===a);b.value=P?{...P,type:$}:null},T=(a,$)=>{s(a,$),D.value=!0},U=(a,$)=>{s(a,$),w.value=!0},t=()=>{D.value=!1,w.value=!0,L.value=!0},A=a=>{var $;_.value=a,($=a.addresses)!=null&&$.length&&(c.value=a.addresses.find(P=>P.is_primary))};return _.value.addresses&&(c.value=B.value),re(()=>m.tab,()=>{_.value={...m.profile}}),re(()=>L.value,a=>{a||(D.value=!0)}),He(()=>{c.value=B.value}),(a,$)=>{const P=$e,g=qt,F=Gt;return y(),x("div",zt,[u("div",Ht,[u("span",Yt,M(a.$t("saved_delivery_addresses")),1),p.profile.addresses.length?(y(),x("div",Qt,[(y(!0),x(se,null,he(p.profile.addresses,(j,Y)=>(y(),x("div",{key:Y,class:"profile-address_item"},[u("div",Jt,[C(P,{icon:"shippingBoldIcon",class:"profile-address_item-icon"}),u("span",Wt,M(a.$t("shipping")),1)]),u("p",Xt,M(h(j)),1),u("div",Zt,[u("button",{class:"profile-address_item-button",onClick:Q=>U(j.id,"addresses")},M(a.$t("remove")),9,Kt),u("button",{class:"profile-address_item-button",onClick:Q=>T(j.id,"addresses")},M(a.$t("edit")),9,ea)])]))),128))])):(y(),x("p",ta,M(a.$t("no_data_for_address")),1))]),u("div",aa,[u("span",oa,M(a.$t("recipient_data")),1),e(v).length?(y(),x("div",sa,[(y(!0),x(se,null,he(e(v),(j,Y)=>(y(),x("div",{key:Y,class:"profile-address_item"},[u("div",na,[C(P,{icon:"loginIcon",class:"profile-address_item-icon"}),u("span",la,M(a.$t("recipient_data")),1)]),u("p",ra,M(N(j)),1),j.isMyProfile?oe("",!0):(y(),x("div",ia,[u("button",{class:"profile-address_item-button",onClick:Q=>U(j.id,"recipients")},M(a.$t("remove")),9,da),u("button",{class:"profile-address_item-button",onClick:Q=>T(j.id,"recipients")},M(a.$t("edit")),9,ua)]))]))),128))])):(y(),x("p",ca,M(a.$t("no_data_for_address")),1))]),C(g,{"remove-empty-data-modal":e(L),"onUpdate:removeEmptyDataModal":$[0]||($[0]=j=>ue(L)?L.value=j:null),"is-remove-modal-opened":e(w),title:e(f),description:e(i),"active-item":e(b),profile:e(_),onUpdate:A,onClose:$[1]||($[1]=j=>w.value=!1)},null,8,["remove-empty-data-modal","is-remove-modal-opened","title","description","active-item","profile"]),C(F,{"is-edit-modal-opened":e(D),"active-item":e(b),profile:e(_),title:"editing_data",onUpdate:A,onOpenDeleteModal:t,onClose:$[2]||($[2]=j=>D.value=!1)},null,8,["is-edit-modal-opened","active-item","profile"])])}}},ma=X(pa,[["__scopeId","data-v-a850370f"]]),_a={class:"profile"},fa={__name:"index",props:{profile:{type:Object,default:null}},setup(p){const m=p,o=Ye([{tab:"personal_data_tab_name",component:Rt},{tab:"address_tab_name",component:ma}]),d=V(0),{saveAccountData:B,errorData:k,clearErrorData:_}=Ae(),w=()=>{_()},D=L=>{const b={...m.profile};Object.keys(L).forEach(c=>{b[c]=L[c]}),B(b)};return(L,b)=>{const c=Oe;return y(),x("div",_a,[C(c,{modelValue:e(d),"onUpdate:modelValue":b[0]||(b[0]=f=>ue(d)?d.value=f:null),"menu-items":e(o)},null,8,["modelValue","menu-items"]),(y(),de(Je,null,[(y(),de(Qe(e(o)[e(d)].component),{profile:p.profile,"error-data":e(k),tab:e(d),onSaveAccountData:D,onBlur:w},null,40,["profile","error-data","tab"]))],1024))])}}},Na=X(fa,[["__scopeId","data-v-fd8e2d80"]]);export{Na as default};
