import{_ as A}from"./QJ3VVsaT.js";import{_ as M}from"./CAC9vlZT.js";import{d as R,a1 as U,j as B,o as c,l as h,z as g,F as K,L as O,c as L,C as X,m as y,k as d,t as P,y as C,B as q,_ as G,a6 as b,a7 as x,ay as F,au as N,av as J}from"./Pd6RrLp1.js";import{_ as Q}from"./qKLLgZOX.js";import{_ as W}from"./C84csLUY.js";import{S as E}from"./B-l2-lBV.js";import{u as Y}from"./0zS85Q81.js";import{c as V}from"./D1YAISfT.js";import{p as Z,P as z}from"./DcmtLR2x.js";const D={class:"family-stripe"},ss={class:"family-stripe_item-image-wrapper"},es={class:"family-stripe_item-content"},ns={class:"family-stripe_badges"},ts={key:0,class:"family-stripe_item-tag"},as=["innerHTML"],is={class:"family-stripe_item-title"},os={class:"family-stripe_item-more"},ls=R({__name:"family-stripe",props:{items:{},categoryName:{},categorySlug:{}},setup(r){const o=U(),l={spaceBetween:16,slidesPerView:"auto"},n=a=>(a==null?void 0:a.split(",")[0])??"",t=a=>typeof a=="object"?a==null?void 0:a.url:a,{getSanitizeHtml:m}=Y();return(a,k)=>{const w=A,S=M,_=X,f=Q,$=W;return c(),B("div",D,[h($,{options:l},{default:g(()=>[(c(!0),B(K,null,O(a.items,(e,I)=>(c(),L(y(E),{key:I},{default:g(()=>[h(_,{class:"family-stripe_item",to:y(o)(`/${e!=null&&e.isCategory?"category":"product"}/${e==null?void 0:e.slug}`)},{default:g(()=>{var p,i,u;return[d("div",ss,[(p=e==null?void 0:e.images)!=null&&p[0]?(c(),L(w,{key:0,src:t((i=e==null?void 0:e.images)==null?void 0:i[0]),class:"family-stripe_item-image",alt:e.name},null,8,["src","alt"])):P("",!0)]),d("div",es,[d("p",ns,[(u=e==null?void 0:e.marks)!=null&&u.new?(c(),B("span",ts,C(a.$t("new")),1)):P("",!0),e!=null&&e.customBadges?(c(),B("span",{key:1,class:"family-stripe_item-tag",innerHTML:y(m)(e==null?void 0:e.customBadges)},null,8,as)):P("",!0)]),d("span",is,C(n(e.name)),1),e.itemPrice?(c(),L(S,{key:0,price:(e==null?void 0:e.itemPrice)||0,class:"family-stripe_item-price"},null,8,["price"])):P("",!0)])]}),_:2},1032,["to"])]),_:2},1024))),128)),h(y(E),null,{default:g(()=>[h(_,{class:"family-stripe_item family-stripe_item__more",to:y(o)(`/category/${a.categorySlug}`)},{default:g(()=>[d("span",os,[q(C(a.$t("view_all"))+" "+C(a.categoryName)+" ",1),h(f,{class:"family-stripe_item-more-icon",icon:"chevronRightIcon"})])]),_:1},8,["to"])]),_:1})]),_:1})])}}}),ks=G(ls,[["__scopeId","data-v-1f267b02"]]),_s=N.object({data:N.array(Z),id:N.number(),name:N.string()}),rs={async getFamilyStripe(r){const o=`${x}promotions/${r}`,{get:l}=b(),{data:n}=await l(o);return F(o,_s,n==null?void 0:n.value)},async getAccessories(r){var t;const o=`${x}categories/${r}`,{get:l}=b(),{data:n}=await l(o);return F(o,V,(t=n==null?void 0:n.value)==null?void 0:t.data)},async getCategories(r){var t;const o=`${x}categories-search`,{get:l}=b(),{data:n}=await l(o,r);return F(o,V,(t=n==null?void 0:n.value)==null?void 0:t.data)}},ws=async(r,o)=>{var $,e,I,p;const{camelizeKeys:l}=J,n=l(r);let t=null;(n!=null&&n.content||n!=null&&n.contents)&&(t=(e=($=(n==null?void 0:n.content)||(n==null?void 0:n.contents))==null?void 0:$.find(i=>i.type==="family-stripe"))==null?void 0:e.data);const m=(I=t==null?void 0:t.items)==null?void 0:I.filter(i=>i.entityType==="category"),a=(m==null?void 0:m.map(i=>i.entityId))||null,k=(p=t==null?void 0:t.items)==null?void 0:p.filter(i=>i.entityType==="product"),w=(k==null?void 0:k.map(i=>i.entityId))||null,S=a?await rs.getCategories({"category_ids[]":[...a]}):null,_=w?await z.getProducts({search:`id:${w.join(",")}`,searchFields:"id:in",lang:o}):null,f=[];return t!=null&&t.items&&t.items.forEach(i=>{var u;S&&S.forEach(s=>{var v,T;if(i.entityId==s.id){const j={isCategory:!0,images:s==null?void 0:s.images,customBadges:(T=(v=s==null?void 0:s.contents)==null?void 0:v.find(H=>H.type==="custom_badges"))==null?void 0:T.data,itemPrice:s==null?void 0:s.minPrice,slug:s==null?void 0:s.slug,name:s==null?void 0:s.name,marks:s==null?void 0:s.marks};f.push(j)}}),_!=null&&_.data&&((u=_==null?void 0:_.data)==null||u.forEach(s=>{if(i.entityId==s.id){const v={isCategory:!1,images:s==null?void 0:s.images,customBadges:s==null?void 0:s.customBadges,itemPrice:s==null?void 0:s.finalPrice,slug:s==null?void 0:s.slug,name:s==null?void 0:s.name,marks:s==null?void 0:s.marks};f.push(v)}}))}),f};export{rs as C,ks as _,ws as g};
